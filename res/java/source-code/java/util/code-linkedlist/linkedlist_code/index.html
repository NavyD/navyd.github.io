<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title> - Even - A super concise theme for Hugo</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=author content="navyd"><meta name=description content="LinkedList List 和Deque接口的双链接列表(Doubly-linked list)实现。该类实现了所有可选的List操作和允许所有元素(包括null)。"><meta name=keywords content="Hugo,blog,navyd">
<meta name=generator content="Hugo 0.87.0 with theme even">
<link rel=canonical href=https://navyd.github.io/res/java/source-code/java/util/code-linkedlist/linkedlist_code/>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/manifest.json>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<link href=/sass/main.min.a659bb31b17a54f7792e1bc783fc75b31118e6a175b42337b03fae0b1a3ef2b5.css rel=stylesheet>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous>
<meta property="og:title" content>
<meta property="og:description" content="LinkedList List 和Deque接口的双链接列表(Doubly-linked list)实现。该类实现了所有可选的List操作和允许所有元素(包括null)。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://navyd.github.io/res/java/source-code/java/util/code-linkedlist/linkedlist_code/"><meta property="article:section" content="res">
<meta itemprop=name content>
<meta itemprop=description content="LinkedList List 和Deque接口的双链接列表(Doubly-linked list)实现。该类实现了所有可选的List操作和允许所有元素(包括null)。">
<meta itemprop=wordCount content="8975">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content>
<meta name=twitter:description content="LinkedList List 和Deque接口的双链接列表(Doubly-linked list)实现。该类实现了所有可选的List操作和允许所有元素(包括null)。"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>navyd的个人博客</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<a href=/>
<li class=mobile-menu-item>Home</li>
</a><a href=/post/>
<li class=mobile-menu-item>Archives</li>
</a><a href=/tags/>
<li class=mobile-menu-item>Tags</li>
</a><a href=/categories/>
<li class=mobile-menu-item>Categories</li>
</a>
</ul>
</nav>
<div class=container id=mobile-panel>
<header id=header class=header>
<div class=logo-wrapper>
<a href=/ class=logo>navyd的个人博客</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=/>Home</a>
</li><li class=menu-item>
<a class=menu-item-link href=/post/>Archives</a>
</li><li class=menu-item>
<a class=menu-item-link href=/tags/>Tags</a>
</li><li class=menu-item>
<a class=menu-item-link href=/categories/>Categories</a>
</li>
</ul>
</nav>
</header>
<main id=main class=main>
<div class=content-wrapper>
<div id=content class=content>
<article class=post>
<div class=post-content>
<h1 id=linkedlist>LinkedList</h1>
<p>List 和Deque接口的双链接列表(Doubly-linked list)实现。该类实现了所有可选的List操作和允许所有元素(包括null)。</p>
<p>所有的操作执行情况都能因为双链接列表而被预知，索引进入列表的操作将通过遍历列表的方法来接近指定的索引．</p>
<p>类结构：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>class</span> <span class=nc>LinkedList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>AbstractSequentialList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>implements</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;,</span> <span class=n>Deque</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;,</span> <span class=n>Cloneable</span><span class=o>,</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>Serializable</span>
</code></pre></td></tr></table>
</div>
</div><p><img src=images/linkedlist_2.png alt></p>
<p>注意：</p>
<ul>
<li>LinkedList实现了List接口，作为list时其顺序是由插入元素的顺序保证，由于链表结构插入容易，查找较难，一般没有容量限制．</li>
<li>LinkedList实现了Deque接口，可以作为堆栈stack，队列queue，双端队列．但是由于这些结构都不允许出现null元素，而linkedList允许null，在使用时应该特别注意．而且，在作为stack,queue的实现应该使用性能更佳的ArrayDeque</li>
<li>LinkedList不是线程安全的，可以通过 Collections.synchronizedList包装为线程安全类</li>
<li>LinkedList没有容量限制，链表没有长度限制，只有标准的collection两个构造器，所以在作为Deque, Queue时要注意</li>
</ul>
<p>所有公共方法：</p>
<p><img src=images/linkedlist_1.png alt></p>
<h2 id=双链接列表>双链接列表</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=c1>// 双向链表    
</span><span class=c1></span><span class=kd>private</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
  		<span class=n>E</span> <span class=n>item</span><span class=o>;</span>
        <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>;</span>
        <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>prev</span><span class=o>;</span>

        <span class=n>Node</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>prev</span><span class=o>,</span> <span class=n>E</span> <span class=n>element</span><span class=o>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
            <span class=k>this</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=n>element</span><span class=o>;</span>
            <span class=k>this</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
            <span class=k>this</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=n>prev</span><span class=o>;</span>
        <span class=o>}</span>
    <span class=o>}</span> 
</code></pre></td></tr></table>
</div>
</div><p>双向链表的结构图：</p>
<p><img src=images/linkedlist_3.jpg alt></p>
<h3 id=应用>应用</h3>
<p>LinkedList通过链表头指针<code>first</code>字段和链表尾指针<code>last</code>字段对相应链表元素的引用来维护链表．</p>
<h3 id=链表操作>链表操作</h3>
<h4 id=节点链接>节点链接</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Links e as first element.
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=kt>void</span> <span class=nf>linkFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>newNode</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;&gt;(</span><span class=kc>null</span><span class=o>,</span> <span class=n>e</span><span class=o>,</span> <span class=n>f</span><span class=o>);</span>
        <span class=c1>// 成为新的首节点
</span><span class=c1></span>        <span class=n>first</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=c1>// 如果首节点f为空即链表为空就添加到尾节点last中
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>f</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=n>last</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=c1>// 链表不为空时链接到上一个首节点前面prev
</span><span class=c1></span>        <span class=k>else</span>
            <span class=n>f</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=n>size</span><span class=o>++;</span>
        <span class=n>modCount</span><span class=o>++;</span>
    <span class=o>}</span>

    <span class=cm>/**
</span><span class=cm>     * Links e as last element.
</span><span class=cm>     */</span>
    <span class=kt>void</span> <span class=nf>linkLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>newNode</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;&gt;(</span><span class=n>l</span><span class=o>,</span> <span class=n>e</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
        <span class=c1>// 新的尾节点
</span><span class=c1></span>        <span class=n>last</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=c1>// 如果尾节点l为空即链表为空就添加为首节点first
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>l</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=n>first</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=c1>// 链表存在就链接到尾节点l
</span><span class=c1></span>        <span class=k>else</span>
            <span class=n>l</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=n>size</span><span class=o>++;</span>
        <span class=n>modCount</span><span class=o>++;</span>
    <span class=o>}</span>

    <span class=cm>/**
</span><span class=cm>     * Inserts element e before non-null Node succ.
</span><span class=cm>     */</span>
    <span class=kt>void</span> <span class=nf>linkBefore</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>succ</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// assert succ != null;
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>pred</span> <span class=o>=</span> <span class=n>succ</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span>
        <span class=c1>// 新节点在pred后面，在succ前面
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>newNode</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;&gt;(</span><span class=n>pred</span><span class=o>,</span> <span class=n>e</span><span class=o>,</span> <span class=n>succ</span><span class=o>);</span>
        <span class=c1>// 插入到succ前面
</span><span class=c1></span>        <span class=n>succ</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=c1>// 如果pred为空表示succ为首节点，新节点插入前面变为新的首节点
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>pred</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=n>first</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=c1>// succ不是首节点，链接到pred的后面
</span><span class=c1></span>        <span class=k>else</span>
            <span class=n>pred</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=n>size</span><span class=o>++;</span>
        <span class=n>modCount</span><span class=o>++;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=链接移除>链接移除</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Unlinks non-null first node f.
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=n>E</span> <span class=nf>unlinkFirst</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// assert f == first &amp;&amp; f != null;
</span><span class=c1></span>        <span class=c1>// 保证f != null
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>E</span> <span class=n>element</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=c1>// 将首节点f的下一个节点next作为新的首节点
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
        <span class=n>f</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=n>f</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span> <span class=c1>// help GC
</span><span class=c1></span>        <span class=n>first</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
        <span class=c1>// 如果链表只有一个元素f即next为空时将last=null
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=n>last</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=c1>// next非空成为首节点删除链接前一个节点f
</span><span class=c1></span>        <span class=k>else</span>
            <span class=n>next</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=n>size</span><span class=o>--;</span>
        <span class=n>modCount</span><span class=o>++;</span>
        <span class=k>return</span> <span class=n>element</span><span class=o>;</span>
    <span class=o>}</span>

	<span class=cm>/**
</span><span class=cm>     * Unlinks non-null last node l.
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=n>E</span> <span class=nf>unlinkLast</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>l</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// assert l == last &amp;&amp; l != null;
</span><span class=c1></span>        <span class=c1>// 保证l　!= null
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>E</span> <span class=n>element</span> <span class=o>=</span> <span class=n>l</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=c1>// 将尾节点l的上一个节点prev作为新的尾节点
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>prev</span> <span class=o>=</span> <span class=n>l</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span>
        <span class=n>l</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=n>l</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span> <span class=c1>// help GC
</span><span class=c1></span>        <span class=n>last</span> <span class=o>=</span> <span class=n>prev</span><span class=o>;</span>
        <span class=c1>// 如果上一个为节点prev为空即链表只有一个元素l就删除将first置为空
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>prev</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=n>first</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=c1>// prev存在即删除l的链接
</span><span class=c1></span>        <span class=k>else</span>
            <span class=n>prev</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=n>size</span><span class=o>--;</span>
        <span class=n>modCount</span><span class=o>++;</span>
        <span class=k>return</span> <span class=n>element</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=cm>/**
</span><span class=cm>     * Unlinks non-null node x.
</span><span class=cm>     */</span>
    <span class=n>E</span> <span class=nf>unlink</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// assert x != null;
</span><span class=c1></span>        <span class=c1>// 保证 x != null
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>E</span> <span class=n>element</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=c1>// 将x的前后节点链接，删除x节点
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>prev</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span>
        
        <span class=c1>// 链接next节点　考虑prev是否为空
</span><span class=c1></span>        <span class=c1>// 如果prev为空即x为首节点就将next作为新的首节点
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>prev</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>first</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
        <span class=o>}</span> 
        <span class=c1>// 将next链接到prev后面
</span><span class=c1></span>        <span class=k>else</span> <span class=o>{</span>
            <span class=n>prev</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
            <span class=n>x</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=c1>// 链接prev节点　考虑next是否为空
</span><span class=c1></span>        <span class=c1>// 如果next为空即x为尾节点就将prev作为新的尾节点
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>last</span> <span class=o>=</span> <span class=n>prev</span><span class=o>;</span>
        <span class=o>}</span> 
        <span class=c1>// 将prev链接到next前面
</span><span class=c1></span>        <span class=k>else</span> <span class=o>{</span>
            <span class=n>next</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=n>prev</span><span class=o>;</span>
            <span class=n>x</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=o>}</span>
        <span class=c1>// gc回收
</span><span class=c1></span>        <span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=n>size</span><span class=o>--;</span>
        <span class=n>modCount</span><span class=o>++;</span>
        <span class=k>return</span> <span class=n>element</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=双端队列deque>双端队列Deque</h2>
<h3 id=插入>插入</h3>
<p>详细的链表操作在上面&mldr;</p>
<ul>
<li>void addFirst(E e)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Inserts the specified element at the beginning of this list.
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>addFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>linkFirst</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>void addLast(E e)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Appends the specified element to the end of this list.
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;This method is equivalent to {@link #add}.
</span><span class=cm>     *
</span><span class=cm>     * @param e the element to add
</span><span class=cm>     */</span>
	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>addLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>linkLast</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean offerFirst(E e)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Inserts the specified element at the front of this list.
</span><span class=cm>     *
</span><span class=cm>     * @param e the element to insert
</span><span class=cm>     * @return {@code true} (as specified by {@link Deque#offerFirst})
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>offerFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>addFirst</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean offerLast(E e)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Inserts the specified element at the end of this list.
</span><span class=cm>     *
</span><span class=cm>     * @param e the element to insert
</span><span class=cm>     * @return {@code true} (as specified by {@link Deque#offerLast})
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>offerLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>addLast</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意>注意</h4>
<ul>
<li>offerXxx方法的实现等效(调用)addXxx方法</li>
</ul>
<h3 id=删除>删除</h3>
<ul>
<li>E removeFirst()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Removes and returns the first element from this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the first element from this list
</span><span class=cm>     * @throws NoSuchElementException if this list is empty
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>removeFirst</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>f</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>NoSuchElementException</span><span class=o>();</span>
        <span class=c1>// 移除并更新当前首节点
</span><span class=c1></span>        <span class=k>return</span> <span class=n>unlinkFirst</span><span class=o>(</span><span class=n>f</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E removeLast()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Removes and returns the last element from this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the last element from this list
</span><span class=cm>     * @throws NoSuchElementException if this list is empty
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>removeLast</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>l</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>NoSuchElementException</span><span class=o>();</span>
        <span class=k>return</span> <span class=n>unlinkLast</span><span class=o>(</span><span class=n>l</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E pollFirst()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves and removes the first element of this list,
</span><span class=cm>     * or returns {@code null} if this list is empty.
</span><span class=cm>     *
</span><span class=cm>     * @return the first element of this list, or {@code null} if
</span><span class=cm>     *     this list is empty
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>pollFirst</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
        <span class=k>return</span> <span class=o>(</span><span class=n>f</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>unlinkFirst</span><span class=o>(</span><span class=n>f</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E pollLast()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves and removes the last element of this list,
</span><span class=cm>     * or returns {@code null} if this list is empty.
</span><span class=cm>     *
</span><span class=cm>     * @return the last element of this list, or {@code null} if
</span><span class=cm>     *     this list is empty
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>pollLast</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
        <span class=k>return</span> <span class=o>(</span><span class=n>l</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>unlinkLast</span><span class=o>(</span><span class=n>l</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-1>注意</h4>
<ul>
<li>当链表为空时，removeXxx将抛出异常，而pollXxx将返回null</li>
</ul>
<h3 id=检查>检查</h3>
<ul>
<li>E getFirst()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns the first element in this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the first element in this list
</span><span class=cm>     * @throws NoSuchElementException if this list is empty
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>getFirst</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>f</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>NoSuchElementException</span><span class=o>();</span>
        <span class=k>return</span> <span class=n>f</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E getLast()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns the last element in this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the last element in this list
</span><span class=cm>     * @throws NoSuchElementException if this list is empty
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>getLast</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>l</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>NoSuchElementException</span><span class=o>();</span>
        <span class=k>return</span> <span class=n>l</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E peekFirst()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves, but does not remove, the first element of this list,
</span><span class=cm>     * or returns {@code null} if this list is empty.
</span><span class=cm>     *
</span><span class=cm>     * @return the first element of this list, or {@code null}
</span><span class=cm>     *         if this list is empty
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>peekFirst</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
        <span class=k>return</span> <span class=o>(</span><span class=n>f</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>f</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
     <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E peekLast()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves, but does not remove, the last element of this list,
</span><span class=cm>     * or returns {@code null} if this list is empty.
</span><span class=cm>     *
</span><span class=cm>     * @return the last element of this list, or {@code null}
</span><span class=cm>     *         if this list is empty
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>peekLast</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
        <span class=k>return</span> <span class=o>(</span><span class=n>l</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>l</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-2>注意</h4>
<ul>
<li>当链表为空时，getXxx方法将抛出异常，peekXxx将返回null</li>
</ul>
<h3 id=迭代>迭代</h3>
<h4 id=正序迭代>正序迭代</h4>
<ul>
<li>Iterator<e> iterator()：集合的迭代实现</li>
</ul>
<h4 id=逆序迭代>逆序迭代</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>descendingIterator</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>DescendingIterator</span><span class=o>();</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><p>实现</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Adapter to provide descending iterators via ListItr.previous
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=kd>class</span> <span class=nc>DescendingIterator</span> <span class=kd>implements</span> <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
        <span class=kd>private</span> <span class=kd>final</span> <span class=n>ListItr</span> <span class=n>itr</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ListItr</span><span class=o>(</span><span class=n>size</span><span class=o>());</span>
        <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>hasNext</span><span class=o>()</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>itr</span><span class=o>.</span><span class=na>hasPrevious</span><span class=o>();</span>
        <span class=o>}</span>
        <span class=kd>public</span> <span class=n>E</span> <span class=nf>next</span><span class=o>()</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>itr</span><span class=o>.</span><span class=na>previous</span><span class=o>();</span>
        <span class=o>}</span>
        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>remove</span><span class=o>()</span> <span class=o>{</span>
            <span class=n>itr</span><span class=o>.</span><span class=na>remove</span><span class=o>();</span>
        <span class=o>}</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-3>注意</h4>
<ul>
<li>逆序迭代器就是通过正序迭代器ListIterator实现的</li>
</ul>
<h3 id=移除指定元素>移除指定元素</h3>
<ul>
<li>boolean removeFirstOccurrence(Object o)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Removes the first occurrence of the specified element in this
</span><span class=cm>     * list (when traversing the list from head to tail).  If the list
</span><span class=cm>     * does not contain the element, it is unchanged.
</span><span class=cm>     *
</span><span class=cm>     * @param o element to be removed from this list, if present
</span><span class=cm>     * @return {@code true} if the list contained the specified element
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>removeFirstOccurrence</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
      	<span class=c1>// 集合操作collection.remove(Object)。实现为从前往后遍历寻找指定元素
</span><span class=c1></span>        <span class=k>return</span> <span class=n>remove</span><span class=o>(</span><span class=n>o</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean removeLastOccurrence(Object o)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Removes the last occurrence of the specified element in this
</span><span class=cm>     * list (when traversing the list from head to tail).  If the list
</span><span class=cm>     * does not contain the element, it is unchanged.
</span><span class=cm>     *
</span><span class=cm>     * @param o element to be removed from this list, if present
</span><span class=cm>     * @return {@code true} if the list contained the specified element
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>removeLastOccurrence</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// 如果指定元素为null
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>o</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
            <span class=c1>// 从链表尾节点last往前遍历 寻找item=null的节点
</span><span class=c1></span>            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>)</span> <span class=o>{</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
                    <span class=c1>// 移除该节点
</span><span class=c1></span>                    <span class=n>unlink</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
                    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
                <span class=o>}</span>
            <span class=o>}</span>
        <span class=o>}</span> 
        <span class=c1>// 如果指定元素不为null
</span><span class=c1></span>        <span class=k>else</span> <span class=o>{</span>
            <span class=c1>// 往前遍历  
</span><span class=c1></span>            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>)</span> <span class=o>{</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>o</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>))</span> <span class=o>{</span>
                    <span class=c1>// 移除节点
</span><span class=c1></span>                    <span class=n>unlink</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
                    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
                <span class=o>}</span>
            <span class=o>}</span>
        <span class=o>}</span>
        <span class=c1>// 链表中不存在指定元素
</span><span class=c1></span>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=注意-4>注意</h3>
<ul>
<li>LinkedList实现了双端队列Deque接口标准为操作元素方法定义两种形式：抛出异常和返回特殊值。</li>
</ul>
<p>对于插入系列方法，offerXxx直接调用addXxx并在后面<code>return true</code> ，由于LinkedList没有显式的容量限制，即<strong>不会存在空间问题而插入失败</strong>，offerXxx就不会返回false，addXxx不会因此抛出异常，因此将offerXxx实现为调用addXxx并在后面<code>return true</code></p>
<p>删除和检查系列方法都是在链表为空时一种抛出异常，另一种返回特殊值</p>
<h2 id=队列queue>队列Queue</h2>
<h3 id=插入-1>插入</h3>
<ul>
<li>boolean add(E e);</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Appends the specified element to the end of this list.
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;This method is equivalent to {@link #addLast}.
</span><span class=cm>     *
</span><span class=cm>     * @param e element to be appended to this list
</span><span class=cm>     * @return {@code true} (as specified by {@link Collection#add})
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>linkLast</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean offer(E e);</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Adds the specified element as the tail (last element) of this list.
</span><span class=cm>     *
</span><span class=cm>     * @param e the element to add
</span><span class=cm>     * @return {@code true} (as specified by {@link Queue#offer})
</span><span class=cm>     * @since 1.5
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>offer</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>add</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-5>注意</h4>
<ul>
<li>Queue接口要求add在没有空间可用添加失败后应该抛出异常，但是LinkedList是无界队列，不会出现这种异常，offer和add实现一致</li>
</ul>
<h3 id=删除-1>删除</h3>
<ul>
<li>E remove()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves and removes the head (first element) of this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the head of this list
</span><span class=cm>     * @throws NoSuchElementException if this list is empty
</span><span class=cm>     * @since 1.5
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>remove</span><span class=o>()</span> <span class=o>{</span>
      	<span class=c1>// Deque.removeFirst()
</span><span class=c1></span>        <span class=k>return</span> <span class=n>removeFirst</span><span class=o>();</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E poll()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves and removes the head (first element) of this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the head of this list, or {@code null} if this list is empty
</span><span class=cm>     * @since 1.5
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>poll</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
        <span class=k>return</span> <span class=o>(</span><span class=n>f</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>unlinkFirst</span><span class=o>(</span><span class=n>f</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=检查-1>检查</h3>
<ul>
<li>E element()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves, but does not remove, the head (first element) of this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the head of this list
</span><span class=cm>     * @throws NoSuchElementException if this list is empty
</span><span class=cm>     * @since 1.5
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>element</span><span class=o>()</span> <span class=o>{</span>
        <span class=c1>// Deque.getFirst()
</span><span class=c1></span>        <span class=k>return</span> <span class=n>getFirst</span><span class=o>();</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E peek()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Retrieves, but does not remove, the head (first element) of this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the head of this list, or {@code null} if this list is empty
</span><span class=cm>     * @since 1.5
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>peek</span><span class=o>()</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
        <span class=k>return</span> <span class=o>(</span><span class=n>f</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>f</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=堆栈stack>堆栈stack</h2>
<h3 id=入栈>入栈</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Pushes an element onto the stack represented by this list.  In other
</span><span class=cm>     * words, inserts the element at the front of this list.
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;This method is equivalent to {@link #addFirst}.
</span><span class=cm>     *
</span><span class=cm>     * @param e the element to push
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>push</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>addFirst</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=出栈>出栈</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Pops an element from the stack represented by this list.  In other
</span><span class=cm>     * words, removes and returns the first element of this list.
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;This method is equivalent to {@link #removeFirst()}.
</span><span class=cm>     *
</span><span class=cm>     * @return the element at the front of this list (which is the top
</span><span class=cm>     *         of the stack represented by this list)
</span><span class=cm>     * @throws NoSuchElementException if this list is empty
</span><span class=cm>     * @since 1.6
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>pop</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>removeFirst</span><span class=o>();</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=检查-2>检查</h3>
<ul>
<li>E peek()</li>
</ul>
<p>与Queue.peek()相同。在上面&mldr;</p>
<h3 id=注意-6>注意</h3>
<ul>
<li>虽然没有Stack的接口，但主要的操作已经实现</li>
</ul>
<h2 id=列表list>列表List</h2>
<h3 id=添加>添加</h3>
<ul>
<li>boolean add(E e):见 队列Queue 插入</li>
<li>void add(int index, E element)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Inserts the specified element at the specified position in this list.
</span><span class=cm>     * Shifts the element currently at that position (if any) and any
</span><span class=cm>     * subsequent elements to the right (adds one to their indices).
</span><span class=cm>     *
</span><span class=cm>     * @param index index at which the specified element is to be inserted
</span><span class=cm>     * @param element element to be inserted
</span><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>,</span> <span class=n>E</span> <span class=n>element</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// 检查指定索引是否允许add操作 不允许则抛出异常
</span><span class=c1></span>        <span class=n>checkPositionIndex</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
        <span class=c1>// 如果添加到链表最后
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>index</span> <span class=o>==</span> <span class=n>size</span><span class=o>)</span>
            <span class=n>linkLast</span><span class=o>(</span><span class=n>element</span><span class=o>);</span>
        <span class=c1>// 添加到链表中
</span><span class=c1></span>        <span class=k>else</span>
            <span class=c1>// 通过索引找到对应节点再将指定元素插入其之前
</span><span class=c1></span>            <span class=n>linkBefore</span><span class=o>(</span><span class=n>element</span><span class=o>,</span> <span class=n>node</span><span class=o>(</span><span class=n>index</span><span class=o>));</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean addAll(Collection&lt;? extends E> c)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Appends all of the elements in the specified collection to the end of
</span><span class=cm>     * this list, in the order that they are returned by the specified
</span><span class=cm>     * collection&#39;s iterator.  The behavior of this operation is undefined if
</span><span class=cm>     * the specified collection is modified while the operation is in
</span><span class=cm>     * progress.  (Note that this will occur if the specified collection is
</span><span class=cm>     * this list, and it&#39;s nonempty.)
</span><span class=cm>     *
</span><span class=cm>     * @param c collection containing elements to be added to this list
</span><span class=cm>     * @return {@code true} if this list changed as a result of the call
</span><span class=cm>     * @throws NullPointerException if the specified collection is null
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>addAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>addAll</span><span class=o>(</span><span class=n>size</span><span class=o>,</span> <span class=n>c</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean addAll(int index, Collection&lt;? extends E> c)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Inserts all of the elements in the specified collection into this
</span><span class=cm>     * list, starting at the specified position.  Shifts the element
</span><span class=cm>     * currently at that position (if any) and any subsequent elements to
</span><span class=cm>     * the right (increases their indices).  The new elements will appear
</span><span class=cm>     * in the list in the order that they are returned by the
</span><span class=cm>     * specified collection&#39;s iterator.
</span><span class=cm>     *
</span><span class=cm>     * @param index index at which to insert the first element
</span><span class=cm>     *              from the specified collection
</span><span class=cm>     * @param c collection containing elements to be added to this list
</span><span class=cm>     * @return {@code true} if this list changed as a result of the call
</span><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}
</span><span class=cm>     * @throws NullPointerException if the specified collection is null
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>addAll</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>,</span> <span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// 检查指定索引是否允许add操作 不允许则抛出异常 
</span><span class=c1></span>        <span class=n>checkPositionIndex</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>

        <span class=n>Object</span><span class=o>[]</span> <span class=n>a</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>toArray</span><span class=o>();</span>
        <span class=kt>int</span> <span class=n>numNew</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
        <span class=c1>// 如果指定colletion没有元素
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>numNew</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span>
            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
        
        <span class=c1>// 找到插入位置前的节点pred和插入位置节点succ
</span><span class=c1></span>        <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>pred</span><span class=o>,</span> <span class=n>succ</span><span class=o>;</span>
        <span class=c1>// 如果指定索引插入位置在链表最后
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>index</span> <span class=o>==</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>succ</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
            <span class=n>pred</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
        <span class=o>}</span> 
        <span class=c1>// 插入位置在链表中
</span><span class=c1></span>        <span class=k>else</span> <span class=o>{</span>
            <span class=c1>// 找到插入位置的节点
</span><span class=c1></span>            <span class=n>succ</span> <span class=o>=</span> <span class=n>node</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
            <span class=n>pred</span> <span class=o>=</span> <span class=n>succ</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span>
        <span class=o>}</span>
<span class=c1>// 优化部分 begin
</span><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=n>Object</span> <span class=n>o</span> <span class=o>:</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
            <span class=nd>@SuppressWarnings</span><span class=o>(</span><span class=s>&#34;unchecked&#34;</span><span class=o>)</span> <span class=n>E</span> <span class=n>e</span> <span class=o>=</span> <span class=o>(</span><span class=n>E</span><span class=o>)</span> <span class=n>o</span><span class=o>;</span>
            <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>newNode</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;&gt;(</span><span class=n>pred</span><span class=o>,</span> <span class=n>e</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
            <span class=c1>// 判断第一次循环时插入时链表为空不存在前一个节点
</span><span class=c1></span>          	<span class=c1>// 当第二次循环时必定 pred != null 不必要的判断
</span><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>pred</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
                <span class=n>first</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
            <span class=c1>// 存在前一个节点
</span><span class=c1></span>            <span class=k>else</span>
                <span class=n>pred</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
            <span class=n>pred</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
        <span class=o>}</span>
<span class=c1>// end
</span><span class=c1></span>        
<span class=cm>/*     // 下面时优化代替部分 
</span><span class=cm>		
</span><span class=cm>		// 将pred判断提前，第一次pred为空
</span><span class=cm>        if (pred == null) 
</span><span class=cm>            first = pred = new Node&lt;&gt;(pred, (E) a[0], null);
</span><span class=cm>        else // pred不为空
</span><span class=cm>            pred = pred.next = new Node&lt;&gt;(pred, (E) a[0], null);
</span><span class=cm>       	// 从1开始循环  去除了不必要的判断pred == null
</span><span class=cm>        for (int i = 1; i &lt; a.length; i++) {
</span><span class=cm>            Object o = a[i];
</span><span class=cm>            @SuppressWarnings(&#34;unchecked&#34;) E e = (E) o;
</span><span class=cm>            Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, null);
</span><span class=cm>            pred.next = newNode;
</span><span class=cm>            pred = newNode;
</span><span class=cm>        }
</span><span class=cm>*/</span>
        <span class=c1>// 如果插入到链表最后时不需要链接原位置节点succ而将last更新为pred
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>succ</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>last</span> <span class=o>=</span> <span class=n>pred</span><span class=o>;</span>
        <span class=o>}</span> 
        <span class=c1>// 插入链表中间需要链接最后插入节点pred和原位置节点succ
</span><span class=c1></span>        <span class=k>else</span> <span class=o>{</span>
            <span class=n>pred</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>succ</span><span class=o>;</span>
            <span class=n>succ</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=n>pred</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=n>size</span> <span class=o>+=</span> <span class=n>numNew</span><span class=o>;</span>
        <span class=n>modCount</span><span class=o>++;</span>
        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-7>注意</h4>
<ul>
<li>插入指定位置index需要遍历链表找到对应的节点这一额外操作，再通过该节点和前节点pred链接指定元素节点</li>
</ul>
<p>遍历操作<code>Node&lt;E> node(int index)</code>方法已经优化只需要在一半链表中找到对应节点</p>
<ul>
<li><code>addAll(int index, Collection&lt;? extends E> c)</code>存在极小的优化空间，已经在代码中指出</li>
</ul>
<h3 id=移除>移除</h3>
<ul>
<li>void clear()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Removes all of the elements from this list.
</span><span class=cm>     * The list will be empty after this call returns.
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>clear</span><span class=o>()</span> <span class=o>{</span>
        <span class=c1>// Clearing all of the links between nodes is &#34;unnecessary&#34;, but:
</span><span class=c1></span>        <span class=c1>// - helps a generational GC if the discarded nodes inhabit
</span><span class=c1></span>        <span class=c1>//   more than one generation
</span><span class=c1></span>        <span class=c1>// - is sure to free memory even if there is a reachable Iterator
</span><span class=c1></span>        <span class=c1>// 将链表所有节点保持的引用置为null  除了让gc回收，对已经获取链表引用的迭代器仍然可以释放内存
</span><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=o>)</span> <span class=o>{</span>
            <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
            <span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
            <span class=n>x</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
            <span class=n>x</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
            <span class=n>x</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
        <span class=o>}</span>
        <span class=n>first</span> <span class=o>=</span> <span class=n>last</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=n>size</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
        <span class=n>modCount</span><span class=o>++;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>E remove(int index);</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Removes the element at the specified position in this list.  Shifts any
</span><span class=cm>     * subsequent elements to the left (subtracts one from their indices).
</span><span class=cm>     * Returns the element that was removed from the list.
</span><span class=cm>     *
</span><span class=cm>     * @param index the index of the element to be removed
</span><span class=cm>     * @return the element previously at the specified position
</span><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>remove</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>checkElementIndex</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
        <span class=c1>// 先找到指定索引对应节点后移除链接
</span><span class=c1></span>        <span class=k>return</span> <span class=n>unlink</span><span class=o>(</span><span class=n>node</span><span class=o>(</span><span class=n>index</span><span class=o>));</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean remove(Object o)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Removes the first occurrence of the specified element from this list,
</span><span class=cm>     * if it is present.  If this list does not contain the element, it is
</span><span class=cm>     * unchanged.  More formally, removes the element with the lowest index
</span><span class=cm>     * {@code i} such that
</span><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;
</span><span class=cm>     * (if such an element exists).  Returns {@code true} if this list
</span><span class=cm>     * contained the specified element (or equivalently, if this list
</span><span class=cm>     * changed as a result of the call).
</span><span class=cm>     *
</span><span class=cm>     * @param o element to be removed from this list, if present
</span><span class=cm>     * @return {@code true} if this list contained the specified element
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>o</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
            <span class=c1>// 从前往后遍历寻找item=null的节点
</span><span class=c1></span>            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span> <span class=o>{</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
                    <span class=n>unlink</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
                    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
                <span class=o>}</span>
            <span class=o>}</span>
        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
            <span class=c1>// 从前往后遍历寻找item=o的节点
</span><span class=c1></span>            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span> <span class=o>{</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>o</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>))</span> <span class=o>{</span>
                    <span class=n>unlink</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
                    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
                <span class=o>}</span>
            <span class=o>}</span>
        <span class=o>}</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean removeAll(Collection&lt;?> c):由超类AbstractList.removeAll实现</li>
<li>boolean retainAll(Collection&lt;?> c):由超类AbstractList.retainAll实现</li>
</ul>
<h4 id=注意-8>注意</h4>
<ul>
<li>clear()将所有链表节点引用置为null，需要一定时间执行但获得会更好的gc管理</li>
<li>由抽象类AbstractList实现的removeAll和retainAll操作都是借助Iterator并调用iterator.remove完成批量删除</li>
</ul>
<h3 id=获取>获取</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns the element at the specified position in this list.
</span><span class=cm>     *
</span><span class=cm>     * @param index index of the element to return
</span><span class=cm>     * @return the element at the specified position in this list
</span><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>get</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>checkElementIndex</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
        <span class=k>return</span> <span class=n>node</span><span class=o>(</span><span class=n>index</span><span class=o>).</span><span class=na>item</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-9>注意</h4>
<ul>
<li>链表不支持随机访问，所以通过指定索引获取的方式只能遍历链表，效率较差。所以不能用遍历数组的方式用get获取</li>
</ul>
<h3 id=替换>替换</h3>
<ul>
<li>E set(int index, E element)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Replaces the element at the specified position in this list with the
</span><span class=cm>     * specified element.
</span><span class=cm>     *
</span><span class=cm>     * @param index index of the element to replace
</span><span class=cm>     * @param element element to be stored at the specified position
</span><span class=cm>     * @return the element previously at the specified position
</span><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>E</span> <span class=nf>set</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>,</span> <span class=n>E</span> <span class=n>element</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>checkElementIndex</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
        <span class=c1>// 获取指定索引对应的节点
</span><span class=c1></span>        <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>node</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
        <span class=n>E</span> <span class=n>oldVal</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=n>element</span><span class=o>;</span>
        <span class=k>return</span> <span class=n>oldVal</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>void replaceAll(UnaryOperator<e> operator)</li>
</ul>
<p>该方法为List接口的defalut方法，通过迭代器Iterator将每个元素替换为指定操作operator返回的结果。下面给出简单的示例：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=kd>static</span> <span class=kt>void</span> <span class=nf>replaceAllTest</span><span class=o>()</span> <span class=o>{</span>
        <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedList</span><span class=o>&lt;&gt;(</span><span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=s>&#34;ab&#34;</span><span class=o>,</span> <span class=s>&#34;abc&#34;</span><span class=o>));</span>
        <span class=n>list</span><span class=o>.</span><span class=na>replaceAll</span><span class=o>(</span><span class=n>s</span> <span class=o>-&gt;</span> <span class=o>{</span>
            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;replace before:&#34;</span> <span class=o>+</span> <span class=n>s</span><span class=o>);</span>
            <span class=kd>final</span> <span class=n>String</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>();</span>
            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;replace after :&#34;</span> <span class=o>+</span> <span class=n>temp</span><span class=o>);</span>
            <span class=k>return</span> <span class=n>temp</span><span class=o>;</span>
        <span class=o>});</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>list</span><span class=o>);</span>
<span class=cm>/*输出：
</span><span class=cm>replace before:a
</span><span class=cm>replace after :A
</span><span class=cm>replace before:ab
</span><span class=cm>replace after :AB
</span><span class=cm>replace before:abc
</span><span class=cm>replace after :ABC
</span><span class=cm>[A, AB, ABC]
</span><span class=cm>
</span><span class=cm>*/</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=比较与哈希>比较与哈希</h3>
<ul>
<li>boolean equals(Object o)</li>
</ul>
<p>LinkedList没有覆盖AbstractList.equals的实现，遵从List.equals的定义，大致实现为判断为List对象后比较相同位置的对象是否相等</p>
<ul>
<li>int hashCode()</li>
</ul>
<p>LinkedList没有覆盖AbstractList.hashCode的实现，遵从List.hashCode的定义，大致实现为需要调用List中所有对象的hashCode</p>
<h3 id=查询>查询</h3>
<ul>
<li>int size()</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns the number of elements in this list.
</span><span class=cm>     *
</span><span class=cm>     * @return the number of elements in this list
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>size</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>size</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean isEmpty()：AbstractCollection的实现</li>
<li>boolean contains(Object o)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns {@code true} if this list contains the specified element.
</span><span class=cm>     * More formally, returns {@code true} if and only if this list contains
</span><span class=cm>     * at least one element {@code e} such that
</span><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals(e))&lt;/tt&gt;.
</span><span class=cm>     *
</span><span class=cm>     * @param o element whose presence in this list is to be tested
</span><span class=cm>     * @return {@code true} if this list contains the specified element
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// 从前往后搜索指定元素节点是否存在
</span><span class=c1></span>        <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span><span class=n>o</span><span class=o>)</span> <span class=o>!=</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>boolean containsAll(Collection&lt;?> c)</li>
</ul>
<p>由抽象类AbstractCollection实现，通过遍历集合c调用contains比较</p>
<h3 id=迭代器>迭代器</h3>
<ul>
<li>Iterator<e> iterator()</li>
</ul>
<p>由抽象类AbstractSequential实现，调用listIterator()实现</p>
<ul>
<li>ListIterator<e> listIterator(int index)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns a list-iterator of the elements in this list (in proper
</span><span class=cm>     * sequence), starting at the specified position in the list.
</span><span class=cm>     * Obeys the general contract of {@code List.listIterator(int)}.&lt;p&gt;
</span><span class=cm>     *
</span><span class=cm>     * The list-iterator is &lt;i&gt;fail-fast&lt;/i&gt;: if the list is structurally
</span><span class=cm>     * modified at any time after the Iterator is created, in any way except
</span><span class=cm>     * through the list-iterator&#39;s own {@code remove} or {@code add}
</span><span class=cm>     * methods, the list-iterator will throw a
</span><span class=cm>     * {@code ConcurrentModificationException}.  Thus, in the face of
</span><span class=cm>     * concurrent modification, the iterator fails quickly and cleanly, rather
</span><span class=cm>     * than risking arbitrary, non-deterministic behavior at an undetermined
</span><span class=cm>     * time in the future.
</span><span class=cm>     *
</span><span class=cm>     * @param index index of the first element to be returned from the
</span><span class=cm>     *              list-iterator (by a call to {@code next})
</span><span class=cm>     * @return a ListIterator of the elements in this list (in proper
</span><span class=cm>     *         sequence), starting at the specified position in the list
</span><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}
</span><span class=cm>     * @see List#listIterator(int)
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>listIterator</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>checkPositionIndex</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>ListItr</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=并行迭代器>并行迭代器</h4>
<p>不熟悉</p>
<h4 id=迭代器实现>迭代器实现</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=kd>private</span> <span class=kd>class</span> <span class=nc>ListItr</span> <span class=kd>implements</span> <span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
        <span class=c1>// 最近访问的节点
</span><span class=c1></span>        <span class=kd>private</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>lastReturned</span><span class=o>;</span>
        <span class=c1>// 下一个访问节点
</span><span class=c1></span>        <span class=kd>private</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>;</span>
        <span class=c1>// 下一个节点对应的索引
</span><span class=c1></span>        <span class=kd>private</span> <span class=kt>int</span> <span class=n>nextIndex</span><span class=o>;</span>
        <span class=kd>private</span> <span class=kt>int</span> <span class=n>expectedModCount</span> <span class=o>=</span> <span class=n>modCount</span><span class=o>;</span>

        <span class=n>ListItr</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
            <span class=c1>// assert isPositionIndex(index);
</span><span class=c1></span>            <span class=c1>// 如果指定index在链表最后  则设置next=null，否则设置为对应节点
</span><span class=c1></span>            <span class=n>next</span> <span class=o>=</span> <span class=o>(</span><span class=n>index</span> <span class=o>==</span> <span class=n>size</span><span class=o>)</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>node</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
            <span class=n>nextIndex</span> <span class=o>=</span> <span class=n>index</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>hasNext</span><span class=o>()</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>nextIndex</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=n>E</span> <span class=nf>next</span><span class=o>()</span> <span class=o>{</span>
            <span class=n>checkForComodification</span><span class=o>();</span>
            <span class=k>if</span> <span class=o>(!</span><span class=n>hasNext</span><span class=o>())</span>
                <span class=k>throw</span> <span class=k>new</span> <span class=n>NoSuchElementException</span><span class=o>();</span>
            <span class=c1>// next不用考虑为null，因为hasNext保证next不会null
</span><span class=c1></span>            <span class=n>lastReturned</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
            <span class=n>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
            <span class=n>nextIndex</span><span class=o>++;</span>
            <span class=k>return</span> <span class=n>lastReturned</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>hasPrevious</span><span class=o>()</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>nextIndex</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=n>E</span> <span class=nf>previous</span><span class=o>()</span> <span class=o>{</span>
            <span class=n>checkForComodification</span><span class=o>();</span>
            <span class=k>if</span> <span class=o>(!</span><span class=n>hasPrevious</span><span class=o>())</span>
                <span class=k>throw</span> <span class=k>new</span> <span class=n>NoSuchElementException</span><span class=o>();</span>
            <span class=c1>// 如果next为null表示上一个节点就为last，否则调用next.prev上一个节点
</span><span class=c1></span>            <span class=n>lastReturned</span> <span class=o>=</span> <span class=n>next</span> <span class=o>=</span> <span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=n>last</span> <span class=o>:</span> <span class=n>next</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span>
            <span class=n>nextIndex</span><span class=o>--;</span>
            <span class=k>return</span> <span class=n>lastReturned</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>int</span> <span class=nf>nextIndex</span><span class=o>()</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>nextIndex</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>int</span> <span class=nf>previousIndex</span><span class=o>()</span> <span class=o>{</span>
            <span class=k>return</span> <span class=n>nextIndex</span> <span class=o>-</span> <span class=n>1</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>remove</span><span class=o>()</span> <span class=o>{</span>
            <span class=n>checkForComodification</span><span class=o>();</span>
            <span class=k>if</span> <span class=o>(</span><span class=n>lastReturned</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
                <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalStateException</span><span class=o>();</span>
            <span class=c1>// 被删除节点的下一个节点lastNext
</span><span class=c1></span>            <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>lastNext</span> <span class=o>=</span> <span class=n>lastReturned</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
            <span class=c1>// 移除删除节点
</span><span class=c1></span>            <span class=n>unlink</span><span class=o>(</span><span class=n>lastReturned</span><span class=o>);</span>
            <span class=c1>// 如果删除节点为next 即最近访问的是next()，下一个节点next置为lastNext
</span><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=n>lastReturned</span><span class=o>)</span>
                <span class=n>next</span> <span class=o>=</span> <span class=n>lastNext</span><span class=o>;</span>
            <span class=c1>// 删除节点为next.prev节点 即最近访问的是previous()，next不变，索引位置向前移动一位 将所有节点前移一位
</span><span class=c1></span>            <span class=k>else</span>
                <span class=n>nextIndex</span><span class=o>--;</span>
            <span class=n>lastReturned</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
            <span class=n>expectedModCount</span><span class=o>++;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>set</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
            <span class=k>if</span> <span class=o>(</span><span class=n>lastReturned</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
                <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalStateException</span><span class=o>();</span>
            <span class=n>checkForComodification</span><span class=o>();</span>
            <span class=n>lastReturned</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=n>e</span><span class=o>;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>checkForComodification</span><span class=o>();</span>
            <span class=n>lastReturned</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
            <span class=k>if</span> <span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
                <span class=n>linkLast</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
            <span class=k>else</span>
                <span class=n>linkBefore</span><span class=o>(</span><span class=n>e</span><span class=o>,</span> <span class=n>next</span><span class=o>);</span>
            <span class=n>nextIndex</span><span class=o>++;</span>
            <span class=n>expectedModCount</span><span class=o>++;</span>
        <span class=o>}</span>

        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>forEachRemaining</span><span class=o>(</span><span class=n>Consumer</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>action</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>action</span><span class=o>);</span>
            <span class=k>while</span> <span class=o>(</span><span class=n>modCount</span> <span class=o>==</span> <span class=n>expectedModCount</span> <span class=o>&amp;&amp;</span> <span class=n>nextIndex</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>action</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>next</span><span class=o>.</span><span class=na>item</span><span class=o>);</span>
                <span class=n>lastReturned</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
                <span class=n>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
                <span class=n>nextIndex</span><span class=o>++;</span>
            <span class=o>}</span>
            <span class=n>checkForComodification</span><span class=o>();</span>
        <span class=o>}</span>

        <span class=kd>final</span> <span class=kt>void</span> <span class=nf>checkForComodification</span><span class=o>()</span> <span class=o>{</span>
            <span class=k>if</span> <span class=o>(</span><span class=n>modCount</span> <span class=o>!=</span> <span class=n>expectedModCount</span><span class=o>)</span>
                <span class=k>throw</span> <span class=k>new</span> <span class=n>ConcurrentModificationException</span><span class=o>();</span>
        <span class=o>}</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-10>注意</h4>
<ul>
<li>LinkedList只实现了ListIterator，而iterator()直接调用该对象</li>
<li>ListIterator的实现由于链表与数组ArrayList有些差异</li>
</ul>
<p>nextIndex实际上为数组迭代器上的cursor，虽然next本身也可充当(自己在写链表迭代器时做过，没有考虑用index模拟光标)，但需要额外的判断，下面时用next判断，没有经过详细验证。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>hasNext</span><span class=o>()</span> <span class=o>{</span>
  	<span class=k>return</span> <span class=n>next</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span>
<span class=o>}</span>
<span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>hasPrevious</span><span class=o>()</span> <span class=o>{</span>
  	<span class=c1>// 如果next为空即到了链表最后，链表为空则返回false    如果next不为空则验证next.next
</span><span class=c1></span>	<span class=k>return</span> <span class=o>(</span><span class=n>next</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>next</span><span class=o>.</span><span class=na>next</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>||</span> <span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>last</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>);</span>
<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><p>事实表明增加一个字段nextIndex模拟cursor是很方便直接的，减少了许多频繁的判断</p>
<h3 id=视图>视图</h3>
<ul>
<li>List<e> subList(int fromIndex, int toIndex)</li>
</ul>
<p>由抽象类AbstractList实现。大致为通过保存偏移量offset=fromIndex，subList的所有方法通过偏移量offset在原List上调用方法完成。具体参看源码</p>
<h3 id=转换数组>转换数组</h3>
<ul>
<li>​</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns an array containing all of the elements in this list
</span><span class=cm>     * in proper sequence (from first to last element).
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;The returned array will be &#34;safe&#34; in that no references to it are
</span><span class=cm>     * maintained by this list.  (In other words, this method must allocate
</span><span class=cm>     * a new array).  The caller is thus free to modify the returned array.
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;This method acts as bridge between array-based and collection-based
</span><span class=cm>     * APIs.
</span><span class=cm>     *
</span><span class=cm>     * @return an array containing all of the elements in this list
</span><span class=cm>     *         in proper sequence
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=n>Object</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>()</span> <span class=o>{</span>
        <span class=n>Object</span><span class=o>[]</span> <span class=n>result</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Object</span><span class=o>[</span><span class=n>size</span><span class=o>];</span>
        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
        <span class=c1>// 遍历链表并将节点元素插入数组中
</span><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span>
            <span class=n>result</span><span class=o>[</span><span class=n>i</span><span class=o>++]</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>​</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns an array containing all of the elements in this list in
</span><span class=cm>     * proper sequence (from first to last element); the runtime type of
</span><span class=cm>     * the returned array is that of the specified array.  If the list fits
</span><span class=cm>     * in the specified array, it is returned therein.  Otherwise, a new
</span><span class=cm>     * array is allocated with the runtime type of the specified array and
</span><span class=cm>     * the size of this list.
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;If the list fits in the specified array with room to spare (i.e.,
</span><span class=cm>     * the array has more elements than the list), the element in the array
</span><span class=cm>     * immediately following the end of the list is set to {@code null}.
</span><span class=cm>     * (This is useful in determining the length of the list &lt;i&gt;only&lt;/i&gt; if
</span><span class=cm>     * the caller knows that the list does not contain any null elements.)
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;Like the {@link #toArray()} method, this method acts as bridge between
</span><span class=cm>     * array-based and collection-based APIs.  Further, this method allows
</span><span class=cm>     * precise control over the runtime type of the output array, and may,
</span><span class=cm>     * under certain circumstances, be used to save allocation costs.
</span><span class=cm>     *
</span><span class=cm>     * &lt;p&gt;Suppose {@code x} is a list known to contain only strings.
</span><span class=cm>     * The following code can be used to dump the list into a newly
</span><span class=cm>     * allocated array of {@code String}:
</span><span class=cm>     *
</span><span class=cm>     * &lt;pre&gt;
</span><span class=cm>     *     String[] y = x.toArray(new String[0]);&lt;/pre&gt;
</span><span class=cm>     *
</span><span class=cm>     * Note that {@code toArray(new Object[0])} is identical in function to
</span><span class=cm>     * {@code toArray()}.
</span><span class=cm>     *
</span><span class=cm>     * @param a the array into which the elements of the list are to
</span><span class=cm>     *          be stored, if it is big enough; otherwise, a new array of the
</span><span class=cm>     *          same runtime type is allocated for this purpose.
</span><span class=cm>     * @return an array containing the elements of the list
</span><span class=cm>     * @throws ArrayStoreException if the runtime type of the specified array
</span><span class=cm>     *         is not a supertype of the runtime type of every element in
</span><span class=cm>     *         this list
</span><span class=cm>     * @throws NullPointerException if the specified array is null
</span><span class=cm>     */</span>
    <span class=nd>@SuppressWarnings</span><span class=o>(</span><span class=s>&#34;unchecked&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>(</span><span class=n>T</span><span class=o>[]</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// 如果指定数组长度不够，创建一个刚好长度的同类型的数组
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>length</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>)</span>
            <span class=n>a</span> <span class=o>=</span> <span class=o>(</span><span class=n>T</span><span class=o>[])</span><span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>reflect</span><span class=o>.</span><span class=na>Array</span><span class=o>.</span><span class=na>newInstance</span><span class=o>(</span>
                                <span class=n>a</span><span class=o>.</span><span class=na>getClass</span><span class=o>().</span><span class=na>getComponentType</span><span class=o>(),</span> <span class=n>size</span><span class=o>);</span>
        <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
        <span class=n>Object</span><span class=o>[]</span> <span class=n>result</span> <span class=o>=</span> <span class=n>a</span><span class=o>;</span>
        <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span>
            <span class=n>result</span><span class=o>[</span><span class=n>i</span><span class=o>++]</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
        <span class=c1>// 将a[size()]位置置为null
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>length</span> <span class=o>&gt;</span> <span class=n>size</span><span class=o>)</span>
            <span class=n>a</span><span class=o>[</span><span class=n>size</span><span class=o>]</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>

        <span class=k>return</span> <span class=n>a</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-11>注意</h4>
<ul>
<li>由于toArray()该无参方法底层数组为Object[]，无法向下转型(会抛出异常)，应该使用toArray(T[])带参方法，数组长度应该至少设为list.size()</li>
</ul>
<h3 id=搜索>搜索</h3>
<ul>
<li>int indexOf(Object o)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns the index of the first occurrence of the specified element
</span><span class=cm>     * in this list, or -1 if this list does not contain the element.
</span><span class=cm>     * More formally, returns the lowest index {@code i} such that
</span><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;,
</span><span class=cm>     * or -1 if there is no such index.
</span><span class=cm>     *
</span><span class=cm>     * @param o element to search for
</span><span class=cm>     * @return the index of the first occurrence of the specified element in
</span><span class=cm>     *         this list, or -1 if this list does not contain the element
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>index</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>o</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span> <span class=o>{</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
                    <span class=k>return</span> <span class=n>index</span><span class=o>;</span>
                <span class=n>index</span><span class=o>++;</span>
            <span class=o>}</span>
        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span> <span class=o>{</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>o</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>))</span>
                    <span class=k>return</span> <span class=n>index</span><span class=o>;</span>
                <span class=n>index</span><span class=o>++;</span>
            <span class=o>}</span>
        <span class=o>}</span>
        <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>int lastIndexOf(Object o)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns the index of the last occurrence of the specified element
</span><span class=cm>     * in this list, or -1 if this list does not contain the element.
</span><span class=cm>     * More formally, returns the highest index {@code i} such that
</span><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;,
</span><span class=cm>     * or -1 if there is no such index.
</span><span class=cm>     *
</span><span class=cm>     * @param o element to search for
</span><span class=cm>     * @return the index of the last occurrence of the specified element in
</span><span class=cm>     *         this list, or -1 if this list does not contain the element
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>lastIndexOf</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>index</span> <span class=o>=</span> <span class=n>size</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>o</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>index</span><span class=o>--;</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
                    <span class=k>return</span> <span class=n>index</span><span class=o>;</span>
            <span class=o>}</span>
        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
            <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>index</span><span class=o>--;</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>o</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>))</span>
                    <span class=k>return</span> <span class=n>index</span><span class=o>;</span>
            <span class=o>}</span>
        <span class=o>}</span>
        <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id=注意-12>注意</h4>
<ul>
<li>链表的搜索只有遍历一条路</li>
</ul>
<h3 id=位置访问操作>位置访问操作</h3>
<ul>
<li>Node<e> node(int index)</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java>    <span class=cm>/**
</span><span class=cm>     * Returns the (non-null) Node at the specified element index.
</span><span class=cm>     */</span>
    <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>node</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// assert isElementIndex(index);
</span><span class=c1></span>        <span class=c1>// 如果指定索引在链表左边就从前往后遍历找到指定节点
</span><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>index</span> <span class=o>&lt;</span> <span class=o>(</span><span class=n>size</span> <span class=o>&gt;&gt;</span> <span class=n>1</span><span class=o>))</span> <span class=o>{</span>
            <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>index</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
                <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
            <span class=k>return</span> <span class=n>x</span><span class=o>;</span>
        <span class=o>}</span> 
        <span class=c1>// 如果指定索引在链表右边就从后往前遍历找到指定节点
</span><span class=c1></span>        <span class=k>else</span> <span class=o>{</span>
            <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>size</span> <span class=o>-</span> <span class=n>1</span><span class=o>;</span> <span class=n>i</span> <span class=o>&gt;</span> <span class=n>index</span><span class=o>;</span> <span class=n>i</span><span class=o>--)</span>
                <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span>
            <span class=k>return</span> <span class=n>x</span><span class=o>;</span>
        <span class=o>}</span>
    <span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div>
</div>
</article>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=social-links>
<a href=https://github.com/NavyD/navyd.github.io class="iconfont icon-github" title=github></a>
<a href=https://navyd.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a>
</div>
<div class=copyright>
<span class=power-by>
由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动
</span>
<span class=division>|</span>
<span class=theme-info>
主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span>
<span class=copyright-year>
&copy;
2021<span class=heart><i class="iconfont icon-heart"></i></span><span>navyd</span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class="iconfont icon-up"></i>
</div>
</div>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script>
<script>var languageCode="en".replace(/-/g,'_').replace(/_(.*)/,function(b,a){return b.replace(a,a.toUpperCase())});timeago().render(document.querySelectorAll('.timeago'),languageCode),timeago.cancel()</script>
<script type=text/javascript src=/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js></script>
</body>
</html>