<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title> - Even - A super concise theme for Hugo</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=author content="navyd"><meta name=description content="WSL2 Ubuntu-20.04编译OpenJDK 12 依赖项检查 1 2 3 4 5 6 7 $ bash configure --help Runnable configure script is not present Generating runnable configure script at /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/.configure-support/generated-configure.sh Autoconf is not found on the PATH, and AUTOCONF is not set. You need autoconf to be able to"><meta name=keywords content="Hugo,blog,navyd">
<meta name=generator content="Hugo 0.87.0 with theme even">
<link rel=canonical href=https://navyd.github.io/res/java/jvm/wsl2-ubuntu-20.04%E7%BC%96%E8%AF%91openjdk-12/>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/manifest.json>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<link href=/sass/main.min.a659bb31b17a54f7792e1bc783fc75b31118e6a175b42337b03fae0b1a3ef2b5.css rel=stylesheet>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous>
<meta property="og:title" content>
<meta property="og:description" content="WSL2 Ubuntu-20.04编译OpenJDK 12 依赖项检查 1 2 3 4 5 6 7 $ bash configure --help Runnable configure script is not present Generating runnable configure script at /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/.configure-support/generated-configure.sh Autoconf is not found on the PATH, and AUTOCONF is not set. You need autoconf to be able to">
<meta property="og:type" content="article">
<meta property="og:url" content="https://navyd.github.io/res/java/jvm/wsl2-ubuntu-20.04%E7%BC%96%E8%AF%91openjdk-12/"><meta property="article:section" content="res">
<meta itemprop=name content>
<meta itemprop=description content="WSL2 Ubuntu-20.04编译OpenJDK 12 依赖项检查 1 2 3 4 5 6 7 $ bash configure --help Runnable configure script is not present Generating runnable configure script at /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/.configure-support/generated-configure.sh Autoconf is not found on the PATH, and AUTOCONF is not set. You need autoconf to be able to">
<meta itemprop=wordCount content="1505">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content>
<meta name=twitter:description content="WSL2 Ubuntu-20.04编译OpenJDK 12 依赖项检查 1 2 3 4 5 6 7 $ bash configure --help Runnable configure script is not present Generating runnable configure script at /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/.configure-support/generated-configure.sh Autoconf is not found on the PATH, and AUTOCONF is not set. You need autoconf to be able to"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>navyd的个人博客</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<a href=/>
<li class=mobile-menu-item>Home</li>
</a><a href=/post/>
<li class=mobile-menu-item>Archives</li>
</a><a href=/tags/>
<li class=mobile-menu-item>Tags</li>
</a><a href=/categories/>
<li class=mobile-menu-item>Categories</li>
</a>
</ul>
</nav>
<div class=container id=mobile-panel>
<header id=header class=header>
<div class=logo-wrapper>
<a href=/ class=logo>navyd的个人博客</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=/>Home</a>
</li><li class=menu-item>
<a class=menu-item-link href=/post/>Archives</a>
</li><li class=menu-item>
<a class=menu-item-link href=/tags/>Tags</a>
</li><li class=menu-item>
<a class=menu-item-link href=/categories/>Categories</a>
</li>
</ul>
</nav>
</header>
<main id=main class=main>
<div class=content-wrapper>
<div id=content class=content>
<article class=post>
<div class=post-content>
<h1 id=wsl2-ubuntu-2004编译openjdk-12>WSL2 Ubuntu-20.04编译OpenJDK 12</h1>
<h2 id=依赖项检查>依赖项检查</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ bash configure --help 
Runnable configure script is not present Generating runnable configure script at /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/.configure-support/generated-configure.sh  

Autoconf is not found on the PATH, and AUTOCONF is not set.
You need autoconf to be able to generate a runnable configure script.
You might be able to fix this by running <span class=s1>&#39;sudo apt-get install autoconf&#39;</span>.
Error: Cannot find autoconf
</code></pre></td></tr></table>
</div>
</div><p>这里可能要求<code>sudo apt-get install autoconf</code></p>
<h2 id=参数配置>参数配置</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ bash configure --enable-debug --with-jvm-variants<span class=o>=</span>server
<span class=c1>#...</span>
checking <span class=k>for</span> X11/extensions/shape.h... no configure: error: Could not find all X11 headers <span class=o>(</span>shape.h Xrender.h Xrander.h XTest.h Intrinsic.h<span class=o>)</span>. You might be able to fix this by running <span class=s1>&#39;sudo apt-get install libx11-dev libxext-dev libxrender-dev libxrandr-dev libxtst-dev libxt-dev&#39;</span>.
configure exiting with result code <span class=m>1</span>
<span class=c1>#...</span>
configure: error: Could not find cups! You might be able to fix this by running <span class=s1>&#39;sudo apt-get install libcups2-dev&#39;</span>.
configure exiting with result code <span class=m>1</span>
<span class=c1>#...</span>
configure: error: Could not find fontconfig! You might be able to fix this by running <span class=s1>&#39;sudo apt-get install libfontconfig1-dev&#39;</span>.
configure exiting with result code <span class=m>1</span>
<span class=c1>#...</span>
configure: error: Could not find alsa! You might be able to fix this by running <span class=s1>&#39;sudo apt-get install libasound2-dev&#39;</span>.
configure exiting with result code <span class=m>1</span>
</code></pre></td></tr></table>
</div>
</div><p>在安装了上面提示的依赖后，就可以配置成功</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ bash configure --enable-debug --with-jvm-variants<span class=o>=</span>server
<span class=c1>#...</span>
<span class=o>====================================================</span>
A new configuration has been successfully created in
/home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/linux-x86_64-server-fastdebug
using configure arguments <span class=s1>&#39;--enable-debug --with-jvm-variants=server&#39;</span>.

Configuration summary:
* Debug level:    fastdebug
* HS debug level: fastdebug
* JVM variants:   server
* JVM features:   server: <span class=s1>&#39;aot cds cmsgc compiler1 compiler2 epsilongc g1gc graal jfr jni-check jvmci jvmti management nmt parallelgc serialgc services shenandoahgc vm-structs zgc&#39;</span>
* OpenJDK target: OS: linux, CPU architecture: x86, address length: <span class=m>64</span>
* Version string: 12-internal+0-adhoc.navyd.jdk12-06222165c35f <span class=o>(</span>12-internal<span class=o>)</span>

Tools summary:
* Boot JDK:       openjdk version <span class=s2>&#34;11.0.8&#34;</span> 2020-07-14 OpenJDK Runtime Environment <span class=o>(</span>build 11.0.8+10-post-Ubuntu-0ubuntu120.04<span class=o>)</span> OpenJDK 64-Bit Server VM <span class=o>(</span>build 11.0.8+10-post-Ubuntu-0ubuntu120.04, mixed mode, sharing<span class=o>)</span>  <span class=o>(</span>at /usr/lib/jvm/java-11-openjdk-amd64<span class=o>)</span>
* Toolchain:      gcc <span class=o>(</span>GNU Compiler Collection<span class=o>)</span>
* C Compiler:     Version 9.3.0 <span class=o>(</span>at /usr/bin/gcc<span class=o>)</span>
* C++ Compiler:   Version 9.3.0 <span class=o>(</span>at /usr/bin/g++<span class=o>)</span>

Build performance summary:
* Cores to use:   <span class=m>9</span>
* Memory limit:   <span class=m>9962</span> MB
</code></pre></td></tr></table>
</div>
</div><h2 id=make-images>make images</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ make images
<span class=c1>#...</span>
ERROR: Build failed <span class=k>for</span> target <span class=s1>&#39;images&#39;</span> in configuration <span class=s1>&#39;linux-x86_64-server-fastdebug&#39;</span> <span class=o>(</span><span class=nb>exit</span> code 2<span class=o>)</span>
Stopping sjavac <span class=nv>server</span>

<span class=o>===</span> Output from failing command<span class=o>(</span>s<span class=o>)</span> repeated <span class=nv>here</span> <span class=o>===</span>
* For target hotspot_variant-server_libjvm_objs_arguments.o:
In file included from /usr/include/string.h:495,
                 from /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/utilities/globalDefinitions_gcc.hpp:35,
                 from /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/utilities/globalDefinitions.hpp:32,
                 from /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/utilities/align.hpp:28,
                 from /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/runtime/globals.hpp:29,
                 from /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/memory/allocation.hpp:28,
                 from /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/classfile/classLoaderData.hpp:28,
                 from /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/precompiled/precompiled.hpp:34:
In <span class=k>function</span> ‘char* strncpy<span class=o>(</span>char*, const char*, size_t<span class=o>)</span>’,
    inlined from ‘static jint Arguments::parse_each_vm_init_arg<span class=o>(</span>const JavaVMInitArgs*, bool*, JVMFlag::Flags<span class=o>)</span>’ at /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/src/hotspot/share/runtime/arguments.cpp:2472:29:
/usr/include/x86_64-linux-gnu/bits/string_fortified.h:106:34: error: ‘char* __builtin_strncpy<span class=o>(</span>char*, const char*, long unsigned int<span class=o>)</span>’ output truncated before terminating nul copying as many bytes from a string as its length <span class=o>[</span>-Werror<span class=o>=</span>stringop-truncation<span class=o>]</span>
  <span class=m>106</span> <span class=p>|</span>   <span class=k>return</span> __builtin___strncpy_chk <span class=o>(</span>__dest, __src, __len, __bos <span class=o>(</span>__dest<span class=o>))</span><span class=p>;</span>
   ... <span class=o>(</span>rest of output omitted<span class=o>)</span>

* All <span class=nb>command</span> lines available in /home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/linux-x86_64-server-fastdebug/make-support/failure-logs.
<span class=o>===</span> End of repeated <span class=nv>output</span> <span class=o>===</span>

No indication of failed target found.
Hint: Try searching the build log <span class=k>for</span> <span class=s1>&#39;] Error&#39;</span>.
Hint: See doc/building.html#troubleshooting <span class=k>for</span> assistance.

make<span class=o>[</span>1<span class=o>]</span>: *** <span class=o>[</span>/home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/make/Init.gmk:310: main<span class=o>]</span> Error <span class=m>2</span>
make: *** <span class=o>[</span>/home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/make/Init.gmk:186: images<span class=o>]</span> Error <span class=m>2</span>
</code></pre></td></tr></table>
</div>
</div><p>可以看到build failed，google找了下没什么发现，但是在<code>doc/building.html#Native Compiler (Toolchain) Requirements</code>有句话：</p>
<blockquote>
<p>It should be possible to compile the JDK with both older and newer versions, but the closer you stay to this list, the more likely you are to compile successfully without issues.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Operating system</th>
<th>Toolchain version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux</td>
<td>gcc 7.3.0</td>
</tr>
<tr>
<td>macOS</td>
<td>Apple Xcode 9.4 (using clang 9.1.0)</td>
</tr>
<tr>
<td>Solaris</td>
<td>Oracle Solaris Studio 12.4 (with compiler version 5.13)</td>
</tr>
<tr>
<td>Windows</td>
<td>Microsoft Visual Studio 2017 update 15.5.5</td>
</tr>
</tbody>
</table>
<p>很可能是gcc版本不对引起的，之前<code>bash configure ...</code>成功时的gcc版本是9.3.0，尝试用gcc-7</p>
<p>在build failed后，应该make clean</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ make clean <span class=o>&amp;&amp;</span> make dist-clean
<span class=c1>#...</span>
Finished building target <span class=s1>&#39;clean&#39;</span> in configuration <span class=s1>&#39;linux-x86_64-server-fastdebug&#39;</span>
<span class=c1>#...</span>
Finished building target <span class=s1>&#39;dist-clean&#39;</span> in configuration <span class=s1>&#39;linux-x86_64-server-fastdebug&#39;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=安装gcc-7>安装gcc-7</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ sudo add-apt-repository ppa:ubuntu-toolchain-r/test
$ sudo apt-get update 
$ sudo apt-get install gcc-7
$ sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 <span class=m>100</span>
$ gcc --version
gcc <span class=o>(</span>Ubuntu 7.5.0-6ubuntu2<span class=o>)</span> 7.5.0
</code></pre></td></tr></table>
</div>
</div><p>再尝试<code>bash configure ...</code>时提示gcc与g++版本不一致</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ bash configure --enable-debug --with-jvm-variants<span class=o>=</span>server
<span class=c1>#...</span>
<span class=o>====================================================</span>
A new configuration has been successfully created in
/home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/linux-x86_64-server-fastdebug
using configure arguments <span class=s1>&#39;--enable-debug --with-jvm-variants=server&#39;</span>.

Configuration summary:
* Debug level:    fastdebug
* HS debug level: fastdebug
* JVM variants:   server
* JVM features:   server: <span class=s1>&#39;aot cds cmsgc compiler1 compiler2 epsilongc g1gc graal jfr jni-check jvmci jvmti management nmt parallelgc serialgc services shenandoahgc vm-structs zgc&#39;</span>
* OpenJDK target: OS: linux, CPU architecture: x86, address length: <span class=m>64</span>
* Version string: 12-internal+0-adhoc.navyd.jdk12-06222165c35f <span class=o>(</span>12-internal<span class=o>)</span>

Tools summary:
* Boot JDK:       openjdk version <span class=s2>&#34;11.0.8&#34;</span> 2020-07-14 OpenJDK Runtime Environment <span class=o>(</span>build 11.0.8+10-post-Ubuntu-0ubuntu120.04<span class=o>)</span> OpenJDK 64-Bit Server VM <span class=o>(</span>build 11.0.8+10-post-Ubuntu-0ubuntu120.04, mixed mode, sharing<span class=o>)</span>  <span class=o>(</span>at /usr/lib/jvm/java-11-openjdk-amd64<span class=o>)</span>
* Toolchain:      gcc <span class=o>(</span>GNU Compiler Collection<span class=o>)</span>
* C Compiler:     Version 7.5.0 <span class=o>(</span>at /usr/bin/gcc<span class=o>)</span>
* C++ Compiler:   Version 9.3.0 <span class=o>(</span>at /usr/bin/g++<span class=o>)</span>

Build performance summary:
* Cores to use:   <span class=m>9</span>
* Memory limit:   <span class=m>9962</span> MB

The following warnings were produced. Repeated here <span class=k>for</span> convenience:
WARNING: C and C++ compiler have different version numbers, 7.5.0 vs 9.3.0.
WARNING: This typically indicates a broken setup, and is not supported
WARNING: C and C++ compiler have different version numbers, 7.5.0 vs 9.3.0.
WARNING: This typically indicates a broken setup, and is not supported

$ g++ --version
g++ <span class=o>(</span>Ubuntu 9.3.0-10ubuntu2<span class=o>)</span> 9.3.0
</code></pre></td></tr></table>
</div>
</div><p>需要安装g++-7</p>
<h3 id=安装g-7>安装g++-7</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ sudo apt-get install g++-7
$ sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-7 <span class=m>100</span>
$ g++ --version
g++ <span class=o>(</span>Ubuntu 7.5.0-6ubuntu2<span class=o>)</span> 7.5.0
</code></pre></td></tr></table>
</div>
</div><h3 id=编译>编译</h3>
<p>安装后可正常编译</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ bash configure --enable-debug --with-jvm-variants<span class=o>=</span>server
<span class=c1>#...</span>
<span class=o>====================================================</span>
A new configuration has been successfully created in
/home/navyd/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f/build/linux-x86_64-server-fastdebug
using configure arguments <span class=s1>&#39;--enable-debug --with-jvm-variants=server&#39;</span>.

Configuration summary:
* Debug level:    fastdebug
* HS debug level: fastdebug
* JVM variants:   server
* JVM features:   server: <span class=s1>&#39;aot cds cmsgc compiler1 compiler2 epsilongc g1gc graal jfr jni-check jvmci jvmti management nmt parallelgc serialgc services shenandoahgc vm-structs zgc&#39;</span>
* OpenJDK target: OS: linux, CPU architecture: x86, address length: <span class=m>64</span>
* Version string: 12-internal+0-adhoc.navyd.jdk12-06222165c35f <span class=o>(</span>12-internal<span class=o>)</span>

Tools summary:
* Boot JDK:       openjdk version <span class=s2>&#34;11.0.8&#34;</span> 2020-07-14 OpenJDK Runtime Environment <span class=o>(</span>build 11.0.8+10-post-Ubuntu-0ubuntu120.04<span class=o>)</span> OpenJDK 64-Bit Server VM <span class=o>(</span>build 11.0.8+10-post-Ubuntu-0ubuntu120.04, mixed mode, sharing<span class=o>)</span>  <span class=o>(</span>at /usr/lib/jvm/java-11-openjdk-amd64<span class=o>)</span>
* Toolchain:      gcc <span class=o>(</span>GNU Compiler Collection<span class=o>)</span>
* C Compiler:     Version 7.5.0 <span class=o>(</span>at /usr/bin/gcc<span class=o>)</span>
* C++ Compiler:   Version 7.5.0 <span class=o>(</span>at /usr/bin/g++<span class=o>)</span>

Build performance summary:
* Cores to use:   <span class=m>9</span>
* Memory limit:   <span class=m>9962</span> MB

$ make images
<span class=c1>#...</span>
Creating images/jmods/java.base.jmod
Creating jdk image
Creating CDS archive <span class=k>for</span> jdk image
Stopping sjavac server
Finished building target <span class=s1>&#39;images&#39;</span> in configuration <span class=s1>&#39;linux-x86_64-server-fastdebug&#39;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=检查>检查</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1># ~/Workspaces/third-party-projects/jdk12-sources/jdk12-06222165c35f</span>
$ ./build/linux-x86_64-server-fastdebug/jdk/bin/java --version
openjdk 12-internal 2019-03-19
OpenJDK Runtime Environment <span class=o>(</span>fastdebug build 12-internal+0-adhoc.navyd.jdk12-06222165c35f<span class=o>)</span>
OpenJDK 64-Bit Server VM <span class=o>(</span>fastdebug build 12-internal+0-adhoc.navyd.jdk12-06222165c35f, mixed mode<span class=o>)</span>
</code></pre></td></tr></table>
</div>
</div><p>编译成功！</p>
<h2 id=参考>参考</h2>
<ul>
<li>
<a test="isHyperLink=true" href=https://stackoverflow.com/questions/50729550/installing-g-on-windows-subsystem-for-linux>Installing g++ on windows subsystem for linux</a></li>
<li>
<a test="isHyperLink=true" href=https://blog.csdn.net/weixin_35762621/article/details/80336291>ubuntu16.04 安装gcc 7.3.0</a></li>
<li>[深入理解Java虚拟机：JVM高级特性与最佳实践（第3版）]</li>
</ul>
</div>
</article>
</div>
<script src=https://utteranc.es/client.js repo=navyd/navyd.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script>
<noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript>
</div>
</main>
<footer id=footer class=footer>
<div class=social-links>
<a href=https://github.com/NavyD/navyd.github.io class="iconfont icon-github" title=github></a>
<a href=https://navyd.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a>
</div>
<div class=copyright>
<span class=power-by>
由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动
</span>
<span class=division>|</span>
<span class=theme-info>
主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span>
<div class=busuanzi-footer>
<span id=busuanzi_container_site_pv> 本站总访问量 <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次 </span>
<span class=division>|</span>
<span id=busuanzi_container_site_uv> 本站总访客数 <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span> 人 </span>
</div>
<span class=copyright-year>
&copy;
2021<span class=heart><i class="iconfont icon-heart"></i></span><span>navyd</span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class="iconfont icon-up"></i>
</div>
</div>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script>
<script>var languageCode="en".replace(/-/g,'_').replace(/_(.*)/,function(b,a){return b.replace(a,a.toUpperCase())});timeago().render(document.querySelectorAll('.timeago'),languageCode),timeago.cancel()</script>
<script type=text/javascript src=/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js></script>
</body>
</html>