<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title> - Even - A super concise theme for Hugo</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=author content="navyd"><meta name=description content="Maven 简介 Maven试图将模式应用于项目的构建基础架构，以便通过提供使用最佳实践的清晰路径来提高理解力和生产力。 Maven本质上是一个项目管理和"><meta name=keywords content="Hugo,blog,navyd">
<meta name=generator content="Hugo 0.87.0 with theme even">
<link rel=canonical href=https://navyd.github.io/res/maven/maven_usage/>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/manifest.json>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<link href=/sass/main.min.a659bb31b17a54f7792e1bc783fc75b31118e6a175b42337b03fae0b1a3ef2b5.css rel=stylesheet>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous>
<meta property="og:title" content>
<meta property="og:description" content="Maven 简介 Maven试图将模式应用于项目的构建基础架构，以便通过提供使用最佳实践的清晰路径来提高理解力和生产力。 Maven本质上是一个项目管理和">
<meta property="og:type" content="article">
<meta property="og:url" content="https://navyd.github.io/res/maven/maven_usage/"><meta property="article:section" content="res">
<meta itemprop=name content>
<meta itemprop=description content="Maven 简介 Maven试图将模式应用于项目的构建基础架构，以便通过提供使用最佳实践的清晰路径来提高理解力和生产力。 Maven本质上是一个项目管理和">
<meta itemprop=wordCount content="4990">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content>
<meta name=twitter:description content="Maven 简介 Maven试图将模式应用于项目的构建基础架构，以便通过提供使用最佳实践的清晰路径来提高理解力和生产力。 Maven本质上是一个项目管理和"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>navyd的个人博客</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<a href=/>
<li class=mobile-menu-item>Home</li>
</a><a href=/post/>
<li class=mobile-menu-item>Archives</li>
</a><a href=/tags/>
<li class=mobile-menu-item>Tags</li>
</a><a href=/categories/>
<li class=mobile-menu-item>Categories</li>
</a>
</ul>
</nav>
<div class=container id=mobile-panel>
<header id=header class=header>
<div class=logo-wrapper>
<a href=/ class=logo>navyd的个人博客</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=/>Home</a>
</li><li class=menu-item>
<a class=menu-item-link href=/post/>Archives</a>
</li><li class=menu-item>
<a class=menu-item-link href=/tags/>Tags</a>
</li><li class=menu-item>
<a class=menu-item-link href=/categories/>Categories</a>
</li>
</ul>
</nav>
</header>
<main id=main class=main>
<div class=content-wrapper>
<div id=content class=content>
<article class=post>
<div class=post-content>
<h1 id=maven>Maven</h1>
<h2 id=简介>简介</h2>
<p>Maven试图将模式应用于项目的构建基础架构，以便通过提供使用最佳实践的清晰路径来提高理解力和生产力。 Maven本质上是一个项目管理和理解工具，因此提供了一种帮助管理的方法：</p>
<ul>
<li>Builds</li>
<li>Documentation</li>
<li>Reporting</li>
<li>Dependencies</li>
<li>SCMs</li>
<li>Releases</li>
<li>Distribution</li>
</ul>
<h2 id=archetype>Archetype</h2>
<p>一个原型(Archetype)被定义为一种原始模式或模型，其他所有同类事物都是从该原始模式或模型中作出的。在Maven中，原型是一个项目的模板，它与一些用户输入相结合，生成一个适合用户需求的工作Maven项目。</p>
<p>这个名字适合我们试图提供一个系统，提供一个生成Maven项目的一致手段。 Archetype将帮助作者为用户创建Maven项目模板，并为用户提供生成这些项目模板的参数化版本的方法。</p>
<h2 id=标准目录结构>标准目录结构</h2>
<p><a test href=https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html#>Standard Directory Layout</a></p>
<h2 id=构建项目>构建项目</h2>
<p>Creating a project from an archetype involves three steps:</p>
<ul>
<li>prepare repository reference</li>
<li>the selection of the archetype,</li>
<li>the configuration of that archetype,</li>
<li>the effective creation of the project from the collected information</li>
</ul>
<h3 id=创建新项目>创建新项目</h3>
<p>通常需要连接到maven远程仓库来访问库repository。</p>
<p>如果存储库未被管理，并且您想直接引用它，则必须将存储库添加到settings.xml中</p>
<ul>
<li>在当前工作目录调用<code>mvn archetype:generate</code>将开始创建项目</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn archetype:generate
<span class=o>[</span>INFO<span class=o>]</span> Scanning <span class=k>for</span> projects...
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Building Maven Stub Project <span class=o>(</span>No POM<span class=o>)</span> <span class=m>1</span>
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> &gt;&gt;&gt; maven-archetype-plugin:3.0.1:generate <span class=o>(</span>default-cli<span class=o>)</span> &gt; generate-sources @ standalone-pom &gt;&gt;&gt;
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> <span class=o>&lt;&lt;&lt;</span> maven-archetype-plugin:3.0.1:generate <span class=o>(</span>default-cli<span class=o>)</span> &lt; generate-sources @ standalone-pom <span class=o>&lt;&lt;&lt;</span>
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> --- maven-archetype-plugin:3.0.1:generate <span class=o>(</span>default-cli<span class=o>)</span> @ standalone-pom ---
...
</code></pre></td></tr></table>
</div>
</div><ul>
<li>首先要求从remote中选择原型。只需输入原型的编号。</li>
</ul>
<p>下面是输出信息</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn archetype:generate
<span class=o>[</span>INFO<span class=o>]</span> Scanning <span class=k>for</span> projects...
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Building Maven Stub Project <span class=o>(</span>No POM<span class=o>)</span> <span class=m>1</span>
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> &gt;&gt;&gt; maven-archetype-plugin:3.0.1:generate <span class=o>(</span>default-cli<span class=o>)</span> &gt; generate-sources @ standalone-pom &gt;&gt;&gt;
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> <span class=o>&lt;&lt;&lt;</span> maven-archetype-plugin:3.0.1:generate <span class=o>(</span>default-cli<span class=o>)</span> &lt; generate-sources @ standalone-pom <span class=o>&lt;&lt;&lt;</span>
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> --- maven-archetype-plugin:3.0.1:generate <span class=o>(</span>default-cli<span class=o>)</span> @ standalone-pom ---
<span class=o>[</span>INFO<span class=o>]</span> Generating project in Interactive mode
<span class=o>[</span>INFO<span class=o>]</span> No archetype defined. Using maven-archetype-quickstart <span class=o>(</span>org.apache.maven.archetypes:maven-archetype-quickstart:1.0<span class=o>)</span>
Choose archetype:
1: remote -&gt; am.ik.archetype:maven-reactjs-blank-archetype <span class=o>(</span>Blank Project <span class=k>for</span> React.js<span class=o>)</span>
2: remote -&gt; am.ik.archetype:msgpack-rpc-jersey-blank-archetype <span class=o>(</span>Blank Project <span class=k>for</span> Spring Boot + Jersey<span class=o>)</span>
3: remote -&gt; am.ik.archetype:mvc-1.0-blank-archetype <span class=o>(</span>MVC 1.0 Blank Project<span class=o>)</span>
4: remote -&gt; am.ik.archetype:spring-boot-blank-archetype <span class=o>(</span>Blank Project <span class=k>for</span> Spring Boot<span class=o>)</span>
...
1152: remote -&gt; org.apache.maven.archetypes:maven-archetype-profiles <span class=o>(</span>-<span class=o>)</span>
1153: remote -&gt; org.apache.maven.archetypes:maven-archetype-quickstart <span class=o>(</span>An archetype which contains a sample Maven project.<span class=o>)</span>
...
2107: remote -&gt; us.fatehi:schemacrawler-archetype-maven-project <span class=o>(</span>-<span class=o>)</span>
2108: remote -&gt; us.fatehi:schemacrawler-archetype-plugin-command <span class=o>(</span>-<span class=o>)</span>
2109: remote -&gt; us.fatehi:schemacrawler-archetype-plugin-dbconnector <span class=o>(</span>-<span class=o>)</span>
2110: remote -&gt; us.fatehi:schemacrawler-archetype-plugin-lint <span class=o>(</span>-<span class=o>)</span>
2111: remote -&gt; xyz.luan.generator:xyz-generator <span class=o>(</span>-<span class=o>)</span>
Choose a number or apply filter <span class=o>(</span>format: <span class=o>[</span>groupId:<span class=o>]</span>artifactId, <span class=k>case</span> sensitive contains<span class=o>)</span>: 1153: 
</code></pre></td></tr></table>
</div>
</div><p>注意：默认的1153表示为<code>org.apache.maven.archetypes:maven-archetype-quickstart (An archetype which contains a sample Maven project.)</code>，maven的快速原型</p>
<ul>
<li>输入maven-archetype-quickstart version</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>Choose a number or apply filter <span class=o>(</span>format: <span class=o>[</span>groupId:<span class=o>]</span>artifactId, <span class=k>case</span> sensitive contains<span class=o>)</span>: 1153:     
Choose org.apache.maven.archetypes:maven-archetype-quickstart version: 
1: 1.0-alpha-1
2: 1.0-alpha-2
3: 1.0-alpha-3
4: 1.0-alpha-4
5: 1.0
6: 1.1
Choose a number: 6: 
</code></pre></td></tr></table>
</div>
</div><p>默认选择的是<code>maven-archetype-quickstart</code>的最新版本</p>
<ul>
<li>输入新建项目的<code>groupId</code>,<code>artifactId</code>,<code>version</code>和项目的package</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>Choose a number: 6:
Define value <span class=k>for</span> property <span class=s1>&#39;groupId&#39;</span>: cn.navyd
Define value <span class=k>for</span> property <span class=s1>&#39;artifactId&#39;</span>: MyDemo
Define value <span class=k>for</span> property <span class=s1>&#39;version&#39;</span> 1.0-SNAPSHOT: : 0.0-SNAPSHOT
Define value <span class=k>for</span> property <span class=s1>&#39;package&#39;</span> cn.navyd: : cn.navyd.mydemo
Confirm properties configuration:
groupId: cn.navyd
artifactId: MyDemo
version: 0.0-SNAPSHOT
package: cn.navyd.mydemo
 Y: : y
</code></pre></td></tr></table>
</div>
</div><ul>
<li>项目创建完成</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash> Y: : y
<span class=o>[</span>INFO<span class=o>]</span> ----------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Using following parameters <span class=k>for</span> creating project from Old <span class=o>(</span>1.x<span class=o>)</span> Archetype: maven-archetype-quickstart:1.1
<span class=o>[</span>INFO<span class=o>]</span> ----------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Parameter: basedir, Value: /home/navyd
<span class=o>[</span>INFO<span class=o>]</span> Parameter: package, Value: cn.navyd.mydemo
<span class=o>[</span>INFO<span class=o>]</span> Parameter: groupId, Value: cn.navyd
<span class=o>[</span>INFO<span class=o>]</span> Parameter: artifactId, Value: MyDemo
<span class=o>[</span>INFO<span class=o>]</span> Parameter: packageName, Value: cn.navyd.mydemo
<span class=o>[</span>INFO<span class=o>]</span> Parameter: version, Value: 0.0-SNAPSHOT
<span class=o>[</span>INFO<span class=o>]</span> project created from Old <span class=o>(</span>1.x<span class=o>)</span> Archetype in dir: /home/navyd/MyDemo
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> BUILD SUCCESS
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Total time: 12:52 min
<span class=o>[</span>INFO<span class=o>]</span> Finished at: 2018-03-15T16:49:23+08:00
<span class=o>[</span>INFO<span class=o>]</span> Final Memory: 17M/199M
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
navyd@navyd-notebook:~$
</code></pre></td></tr></table>
</div>
</div><p>验证项目创建的结果</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ tree MyDemo/
MyDemo/
├── pom.xml
└── src
    ├── main
    │   └── java
    │       └── cn
    │           └── navyd
    │               └── mydemo
    │                   └── App.java
    └── <span class=nb>test</span>
        └── java
            └── cn
                └── navyd
                    └── mydemo
                        └── AppTest.java

<span class=m>11</span> directories, <span class=m>3</span> files
</code></pre></td></tr></table>
</div>
</div><h3 id=创建到存在的项目>创建到存在的项目</h3>
<p>Creating an archetype from an existing project involves three steps:</p>
<ul>
<li>the archetype resolution</li>
<li>the archetype installation:deployment</li>
<li>the archetype usage</li>
</ul>
<p>已存在的项目下可能需要maven必须的pom.xml文件</p>
<p>在maven项目中应该包含pom.xml即Project Object Model (POM)信息</p>
<p><a test href=https://maven.apache.org/archetype/maven-archetype-plugin/advanced-usage.html#>Advanced Usage</a></p>
<p>注意：</p>
<ul>
<li>如果已存在的项目目录不符合maven标准的目录结构将会报错</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>~/Workspace/eclipse/workspace/JavaNio$ mvn archetype:create-from-project
<span class=o>[</span>INFO<span class=o>]</span> Scanning <span class=k>for</span> projects...
<span class=o>[</span>INFO<span class=o>]</span> 
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Building Maven Stub Project <span class=o>(</span>No POM<span class=o>)</span> <span class=m>1</span>
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> BUILD FAILURE
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Total time: 0.333 s
<span class=o>[</span>INFO<span class=o>]</span> Finished at: 2018-03-15T17:27:00+08:00
<span class=o>[</span>INFO<span class=o>]</span> Final Memory: 9M/150M
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>ERROR<span class=o>]</span> Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.0.1:create-from-project <span class=o>(</span>default-cli<span class=o>)</span>: Goal requires a project to execute but there is no POM in this directory <span class=o>(</span>/home/navyd/Workspace/eclipse/workspace/JavaNio<span class=o>)</span>. Please verify you invoked Maven from the correct directory. -&gt; <span class=o>[</span>Help 1<span class=o>]</span>
<span class=o>[</span>ERROR<span class=o>]</span> 
<span class=o>[</span>ERROR<span class=o>]</span> To see the full stack trace of the errors, re-run Maven with the -e switch.
<span class=o>[</span>ERROR<span class=o>]</span> Re-run Maven using the -X switch to <span class=nb>enable</span> full debug logging.
<span class=o>[</span>ERROR<span class=o>]</span> 
<span class=o>[</span>ERROR<span class=o>]</span> For more information about the errors and possible solutions, please <span class=nb>read</span> the following articles:
<span class=o>[</span>ERROR<span class=o>]</span> <span class=o>[</span>Help 1<span class=o>]</span> http://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException
</code></pre></td></tr></table>
</div>
</div><h3 id=过滤archetype>过滤Archetype</h3>
<p>在选择原型(Archetype)时存在过多选项的问题，maven允许指定groupid和artifactid过滤list</p>
<ul>
<li>在创建命令上指定</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn archetype:generate -Dfilter<span class=o>=</span>org.apache:struts
</code></pre></td></tr></table>
</div>
</div><ul>
<li>在选择是指定<code>[groupId:]artifactId</code>来过滤掉不需要的原型</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn archetype:generate
<span class=o>[</span>INFO<span class=o>]</span> Scanning <span class=k>for</span> projects...
...
Choose a number or apply filter <span class=o>(</span>format: <span class=o>[</span>groupId:<span class=o>]</span>artifactId, <span class=k>case</span> sensitive contains<span class=o>)</span>: : org.apache:struts
Choose archetype:
1: remote -&gt; org.apache.struts:struts2-archetype-angularjs <span class=o>(</span>-<span class=o>)</span>
2: remote -&gt; org.apache.struts:struts2-archetype-blank <span class=o>(</span>-<span class=o>)</span>
3: remote -&gt; org.apache.struts:struts2-archetype-convention <span class=o>(</span>-<span class=o>)</span>
4: remote -&gt; org.apache.struts:struts2-archetype-dbportlet <span class=o>(</span>-<span class=o>)</span>
5: remote -&gt; org.apache.struts:struts2-archetype-plugin <span class=o>(</span>-<span class=o>)</span>
6: remote -&gt; org.apache.struts:struts2-archetype-portlet <span class=o>(</span>-<span class=o>)</span>
7: remote -&gt; org.apache.struts:struts2-archetype-starter <span class=o>(</span>-<span class=o>)</span>
Choose a number or apply filter <span class=o>(</span>format: <span class=o>[</span>groupId:<span class=o>]</span>artifactId, <span class=k>case</span> sensitive contains<span class=o>)</span>: : <span class=m>7</span>
Choose org.apache.struts:struts2-archetype-starter version: 
</code></pre></td></tr></table>
</div>
</div><h3 id=编译>编译</h3>
<p>切换到由<code>mvn archetype:generate</code>创建的pom.xml的目录，并执行以下命令以编译应用程序源代码：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn compile
</code></pre></td></tr></table>
</div>
</div><p>maven将编译后的目标文件放在<code>${basedir}/target/classes</code></p>
<p>注意：首次编译该项目可能需要时间下载需要的插件和关联依赖。</p>
<h3 id=编译并执行测试类>编译并执行测试类</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn <span class=nb>test</span>
</code></pre></td></tr></table>
</div>
</div><p>注意：</p>
<ul>
<li>如果需要maven可能需要下载测试类需要的依赖和插件</li>
<li>在编译和运行测试类前需要编译main的代码，如果该代码不是最新的</li>
</ul>
<h4 id=仅编译测试类>仅编译测试类</h4>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn test-compile
</code></pre></td></tr></table>
</div>
</div><h3 id=打包>打包</h3>
<p>制作JAR文件非常简单，可以通过执行以下命令来完成：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn package
</code></pre></td></tr></table>
</div>
</div><p>在POM中的packaging元素被设置为jar，maven将其打包为jar文件，如果设置为其他类型，将打包为该类型。</p>
<p>打包文件在目录：<code>${basedir}/target</code></p>
<h3 id=安装打包项目到本地仓库>安装打包项目到本地仓库</h3>
<p>maven允许将已打包项目安装到本地仓库<code>${user.home}/.m2/repository</code></p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn install
</code></pre></td></tr></table>
</div>
</div><p>仓库介绍：<a test href=https://maven.apache.org/guides/introduction/introduction-to-repositories.html>Introduction to Repositories</a></p>
<p>请注意，surefire插件（执行测试）使用特定的命名约定查找包含在文件中的测试。默认情况下，测试包括：</p>
<ul>
<li><code>**/*Test.java</code></li>
<li><code>**/Test*.java</code></li>
<li><code>**/*TestCase.java</code></li>
</ul>
<p>And the default excludes are:</p>
<ul>
<li><code>**/Abstract*Test.java</code></li>
<li><code>**/Abstract*TestCase.java</code></li>
</ul>
<h3 id=移除构建数据>移除构建数据</h3>
<p>在启动之前删除具有所有构建数据的target目录</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ mvn clean
</code></pre></td></tr></table>
</div>
</div><p>注意：</p>
<ul>
<li>该命令需要在对应maven项目的目录下执行，否则将报错</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>~/Desktop$ mvn clean
<span class=o>[</span>INFO<span class=o>]</span> Scanning <span class=k>for</span> projects...
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> BUILD FAILURE
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Total time: 0.115 s
<span class=o>[</span>INFO<span class=o>]</span> Finished at: 2018-03-15T21:39:47+08:00
<span class=o>[</span>INFO<span class=o>]</span> Final Memory: 5M/119M
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>ERROR<span class=o>]</span> The goal you specified requires a project to execute but there is no POM in this directory <span class=o>(</span>/home/navyd/Desktop<span class=o>)</span>. Please verify you invoked Maven from the correct directory. -&gt; <span class=o>[</span>Help 1<span class=o>]</span>
<span class=o>[</span>ERROR<span class=o>]</span> 
<span class=o>[</span>ERROR<span class=o>]</span> To see the full stack trace of the errors, re-run Maven with the -e switch.
<span class=o>[</span>ERROR<span class=o>]</span> Re-run Maven using the -X switch to <span class=nb>enable</span> full debug logging.
<span class=o>[</span>ERROR<span class=o>]</span> 
<span class=o>[</span>ERROR<span class=o>]</span> For more information about the errors and possible solutions, please <span class=nb>read</span> the following articles:
<span class=o>[</span>ERROR<span class=o>]</span> <span class=o>[</span>Help 1<span class=o>]</span> http://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException
</code></pre></td></tr></table>
</div>
</div><h2 id=配置>配置</h2>
<p>所有配置说明：<a test href=https://maven.apache.org/maven-settings/settings.html>full reference</a></p>
<p>配置向导：<a test href=https://maven.apache.org/guides/mini/guide-configuring-maven.html#>Configuring Maven</a></p>
<h3 id=下载jar源码和文档>下载jar源码和文档</h3>
<p>在maven的本地文件夹中<code>~/.m2/setting.xml</code>添加如下代码：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;settings&gt;</span>

   <span class=c>&lt;!-- ... other settings here ... --&gt;</span>

    <span class=nt>&lt;profiles&gt;</span>
        <span class=nt>&lt;profile&gt;</span>
            <span class=nt>&lt;id&gt;</span>downloadSources<span class=nt>&lt;/id&gt;</span>
            <span class=nt>&lt;properties&gt;</span>
                <span class=nt>&lt;downloadSources&gt;</span>true<span class=nt>&lt;/downloadSources&gt;</span>
                <span class=nt>&lt;downloadJavadocs&gt;</span>true<span class=nt>&lt;/downloadJavadocs&gt;</span>
            <span class=nt>&lt;/properties&gt;</span>
        <span class=nt>&lt;/profile&gt;</span>
    <span class=nt>&lt;/profiles&gt;</span>

    <span class=nt>&lt;activeProfiles&gt;</span>
        <span class=nt>&lt;activeProfile&gt;</span>downloadSources<span class=nt>&lt;/activeProfile&gt;</span>
    <span class=nt>&lt;/activeProfiles&gt;</span>
<span class=nt>&lt;/settings&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>参考：</p>
<p><a test href=https://stackoverflow.com/questions/5780758/maven-always-download-sources-and-javadocs>Maven – Always download sources and javadocs</a></p>
<p><a test href=https://maven.apache.org/plugins/maven-dependency-plugin/sources-mojo.html>dependency:sources</a></p>
<h3 id=配置编译版本>配置编译版本</h3>
<p>maven默认的编译版本为java 1.5，创建的项目导入的jre包为jre 1.5，导致高版本无法通过编译</p>
<p>可以在项目的pom.xml中编辑：</p>
<ul>
<li>配置插件参数</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;project&gt;</span>
  [...]
  <span class=nt>&lt;properties&gt;</span>
    <span class=nt>&lt;maven.compiler.source&gt;</span>1.8<span class=nt>&lt;/maven.compiler.source&gt;</span>
    <span class=nt>&lt;maven.compiler.target&gt;</span>1.8<span class=nt>&lt;/maven.compiler.target&gt;</span>
  <span class=nt>&lt;/properties&gt;</span>
  [...]
<span class=nt>&lt;/project&gt;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>直接配置compiler插件</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;project&gt;</span>
  [...]
  <span class=nt>&lt;build&gt;</span>
    [...]
    <span class=nt>&lt;plugins&gt;</span>
      <span class=nt>&lt;plugin&gt;</span>
        <span class=nt>&lt;groupId&gt;</span>org.apache.maven.plugins<span class=nt>&lt;/groupId&gt;</span>
        <span class=nt>&lt;artifactId&gt;</span>maven-compiler-plugin<span class=nt>&lt;/artifactId&gt;</span>
        <span class=nt>&lt;version&gt;</span>3.7.0<span class=nt>&lt;/version&gt;</span>
        <span class=nt>&lt;configuration&gt;</span>
          <span class=nt>&lt;source&gt;</span>1.8<span class=nt>&lt;/source&gt;</span>
          <span class=nt>&lt;target&gt;</span>1.8<span class=nt>&lt;/target&gt;</span>
        <span class=nt>&lt;/configuration&gt;</span>
      <span class=nt>&lt;/plugin&gt;</span>
    <span class=nt>&lt;/plugins&gt;</span>
    [...]
  <span class=nt>&lt;/build&gt;</span>
  [...]
<span class=nt>&lt;/project&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>在更改pom.xml后应该更新项目编译:（未测试）</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>mvn clean &amp;&amp; mvn compiler
</code></pre></td></tr></table>
</div>
</div><h3 id=配置指定compile-encoding>配置指定compile encoding</h3>
<p>windows平台编译时可能会遇到<code>unmappable character (0x80) for encoding GBK</code>的问题：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>PS C:<span class=se>\U</span>sers<span class=se>\n</span>avyd<span class=se>\W</span>orkspaces<span class=se>\p</span>rojects<span class=se>\L</span>ightWebServer&gt; mvn compile
<span class=o>[</span>INFO<span class=o>]</span> Scanning <span class=k>for</span> projects...
<span class=o>[</span>INFO<span class=o>]</span>
<span class=o>[</span>INFO<span class=o>]</span> -----------------&lt; com.lightwebserver:lightwebserver &gt;------------------
<span class=o>[</span>INFO<span class=o>]</span> Building lightwebserver 1.0-SNAPSHOT
<span class=o>[</span>INFO<span class=o>]</span> --------------------------------<span class=o>[</span> jar <span class=o>]</span>---------------------------------
<span class=o>[</span>INFO<span class=o>]</span>
<span class=o>[</span>INFO<span class=o>]</span> --- maven-resources-plugin:2.6:resources <span class=o>(</span>default-resources<span class=o>)</span> @ lightwebserver ---
<span class=o>[</span>WARNING<span class=o>]</span> Using platform encoding <span class=o>(</span>GBK actually<span class=o>)</span> to copy filtered resources, i.e. build is platform dependent!
<span class=o>[</span>INFO<span class=o>]</span> Copying <span class=m>7</span> resources
<span class=o>[</span>INFO<span class=o>]</span>
<span class=o>[</span>INFO<span class=o>]</span> --- maven-compiler-plugin:3.6.0:compile <span class=o>(</span>default-compile<span class=o>)</span> @ lightwebserver ---
<span class=o>[</span>INFO<span class=o>]</span> Changes detected - recompiling the module!
<span class=o>[</span>WARNING<span class=o>]</span> File encoding has not been set, using platform encoding GBK, i.e. build is platform dependent!
<span class=o>[</span>INFO<span class=o>]</span> Compiling <span class=m>39</span> <span class=nb>source</span> files to C:<span class=se>\U</span>sers<span class=se>\n</span>avyd<span class=se>\W</span>orkspaces<span class=se>\p</span>rojects<span class=se>\L</span>ightWebServer<span class=se>\t</span>arget<span class=se>\c</span>lasses
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/util/ReflectUtil.java:<span class=o>[</span>24,108<span class=o>]</span> unmappable character <span class=o>(</span>0x80<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/http/RequestHandler.java:<span class=o>[</span>75,31<span class=o>]</span> unmappable character <span class=o>(</span>0xAD<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/util/FileUtil.java:<span class=o>[</span>16,28<span class=o>]</span> unmappable character <span class=o>(</span>0xA6<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/util/FileUtil.java:<span class=o>[</span>18,26<span class=o>]</span> unmappable character <span class=o>(</span>0x84<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/util/FileUtil.java:<span class=o>[</span>19,26<span class=o>]</span> unmappable character <span class=o>(</span>0x84<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerScan.java:<span class=o>[</span>37,60<span class=o>]</span> unmappable character <span class=o>(</span>0xBA<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerScan.java:<span class=o>[</span>73,68<span class=o>]</span> unmappable character <span class=o>(</span>0xBA<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/io/Server.java:<span class=o>[</span>30,15<span class=o>]</span> unmappable character <span class=o>(</span>0xA8<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/io/Server.java:<span class=o>[</span>36,15<span class=o>]</span> unmappable character <span class=o>(</span>0x96<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/io/Server.java:<span class=o>[</span>45,44<span class=o>]</span> unmappable character <span class=o>(</span>0xAF<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/io/Server.java:<span class=o>[</span>53,26<span class=o>]</span> unmappable character <span class=o>(</span>0xA8<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/io/Server.java:<span class=o>[</span>83,12<span class=o>]</span> unmappable character <span class=o>(</span>0x80<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/io/Server.java:<span class=o>[</span>93,62<span class=o>]</span> unmappable character <span class=o>(</span>0xBD<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/io/Server.java:<span class=o>[</span>94,43<span class=o>]</span> unmappable character <span class=o>(</span>0x80<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerMethod.java:<span class=o>[</span>48,57<span class=o>]</span> unmappable character <span class=o>(</span>0x80<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerMethod.java:<span class=o>[</span>80,10<span class=o>]</span> unmappable character <span class=o>(</span>0x80<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerMethod.java:<span class=o>[</span>80,15<span class=o>]</span> unmappable character <span class=o>(</span>0x80<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerMethod.java:<span class=o>[</span>81,27<span class=o>]</span> unmappable character <span class=o>(</span>0x8B<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerMethod.java:<span class=o>[</span>89,57<span class=o>]</span> unmappable character <span class=o>(</span>0xA1<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerMethod.java:<span class=o>[</span>97,101<span class=o>]</span> unmappable character <span class=o>(</span>0x80<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>ERROR<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerMethod.java:<span class=o>[</span>105,71<span class=o>]</span> unmappable character <span class=o>(</span>0xBC<span class=o>)</span> <span class=k>for</span> encoding GBK
<span class=o>[</span>INFO<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerScan.java: Some input files use or override a deprecated API.
<span class=o>[</span>INFO<span class=o>]</span> /C:/Users/navyd/Workspaces/projects/LightWebServer/src/main/java/com/light/mvc/ControllerScan.java: Recompile with -Xlint:deprecation <span class=k>for</span> details.
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> BUILD SUCCESS
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
<span class=o>[</span>INFO<span class=o>]</span> Total time:  2.928 s
<span class=o>[</span>INFO<span class=o>]</span> Finished at: 2020-06-22T11:01:12+08:00
<span class=o>[</span>INFO<span class=o>]</span> ------------------------------------------------------------------------
</code></pre></td></tr></table>
</div>
</div><p>此时项目的配置是</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-xml data-lang=xml>        <span class=nt>&lt;plugins&gt;</span>
            <span class=nt>&lt;plugin&gt;</span> <span class=c>&lt;!-- 编译 --&gt;</span>
                <span class=nt>&lt;groupId&gt;</span>org.apache.maven.plugins<span class=nt>&lt;/groupId&gt;</span>
                <span class=nt>&lt;artifactId&gt;</span>maven-compiler-plugin<span class=nt>&lt;/artifactId&gt;</span>
                <span class=nt>&lt;version&gt;</span>3.6.0<span class=nt>&lt;/version&gt;</span>
                <span class=nt>&lt;configuration&gt;</span>
                    <span class=nt>&lt;source&gt;</span>1.8<span class=nt>&lt;/source&gt;</span>
                    <span class=nt>&lt;target&gt;</span>1.8<span class=nt>&lt;/target&gt;</span>
                <span class=nt>&lt;/configuration&gt;</span>
            <span class=nt>&lt;/plugin&gt;</span>
        <span class=nt>&lt;/plugins&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>未指定maven编译plugin的encoding字符集：utf-8，修改后可正常compile</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-xml data-lang=xml>        <span class=nt>&lt;plugins&gt;</span>
            <span class=nt>&lt;plugin&gt;</span> <span class=c>&lt;!-- 编译 --&gt;</span>
                <span class=nt>&lt;groupId&gt;</span>org.apache.maven.plugins<span class=nt>&lt;/groupId&gt;</span>
                <span class=nt>&lt;artifactId&gt;</span>maven-compiler-plugin<span class=nt>&lt;/artifactId&gt;</span>
                <span class=nt>&lt;version&gt;</span>3.6.0<span class=nt>&lt;/version&gt;</span>
                <span class=nt>&lt;configuration&gt;</span>
                    <span class=nt>&lt;source&gt;</span>1.8<span class=nt>&lt;/source&gt;</span>
                    <span class=nt>&lt;target&gt;</span>1.8<span class=nt>&lt;/target&gt;</span>
                    <span class=c>&lt;!-- utf8编译 --&gt;</span>
                    <span class=nt>&lt;encoding&gt;</span>UTF-8<span class=nt>&lt;/encoding&gt;</span>
                <span class=nt>&lt;/configuration&gt;</span>
            <span class=nt>&lt;/plugin&gt;</span>
        <span class=nt>&lt;/plugins&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>参考：<a test href=https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html#>Compile Using -source and -target javac Options</a></p>
<h2 id=插件>插件</h2>
<p>与依赖dependency很像</p>
<p>下面是在pom.xml文件中配置使用java 1.5编译项目</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;build&gt;</span>
  <span class=nt>&lt;plugins&gt;</span>
    <span class=nt>&lt;plugin&gt;</span>
      <span class=nt>&lt;groupId&gt;</span>org.apache.maven.plugins<span class=nt>&lt;/groupId&gt;</span>
      <span class=nt>&lt;artifactId&gt;</span>maven-compiler-plugin<span class=nt>&lt;/artifactId&gt;</span>
      <span class=nt>&lt;version&gt;</span>3.3<span class=nt>&lt;/version&gt;</span>
      <span class=nt>&lt;configuration&gt;</span>
        <span class=nt>&lt;source&gt;</span>1.5<span class=nt>&lt;/source&gt;</span>
        <span class=nt>&lt;target&gt;</span>1.5<span class=nt>&lt;/target&gt;</span>
      <span class=nt>&lt;/configuration&gt;</span>
    <span class=nt>&lt;/plugin&gt;</span>
  <span class=nt>&lt;/plugins&gt;</span>
<span class=nt>&lt;/build&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>注意：</p>
<ul>
<li>如果该插件不包含在本地仓库，将会下载并使用指定版本的插件（如果不指定版本，将默认下载最新版本）</li>
<li>configuration将指定参数应用到插件中</li>
</ul>
<h2 id=生命周期>生命周期</h2>
<p>Maven基于构建生命周期的核心概念。这意味着建立和分配特定工件（项目）的过程已经明确定义。</p>
<p>有三种内置的构建生命周期：</p>
<ul>
<li>default：用于项目部署</li>
<li>clean：用于清理项目</li>
<li>site：用于项目站点文档的创建</li>
</ul>
<p>每种生命周期都由多种阶段组成</p>
<p>default主要包括：</p>
<ul>
<li><code>validate</code> - validate the project is correct and all necessary information is available</li>
<li><code>compile</code> - compile the source code of the project</li>
<li><code>test</code> - test the compiled source code using a suitable unit testing framework. These tests should not require the code be packaged or deployed</li>
<li><code>package</code> - take the compiled code and package it in its distributable format, such as a JAR.</li>
<li><code>verify</code> - run any checks on results of integration tests to ensure quality criteria are met</li>
<li><code>install</code> - install the package into the local repository, for use as a dependency in other projects locally</li>
<li><code>deploy</code> - done in the build environment, copies the final package to the remote repository for sharing with other developers and projects.</li>
</ul>
<p>maven将按照指定的顺序完成生命周期。每个阶段都会验证之前的阶段是否完成，如果没有就执行。如<code>mvn install</code>将完成<code>validate</code>, <code>compile</code>, <code>package</code>, 等等，</p>
<p>如果存在子项目，maven将遍历每一个子项目并完成相应的生命周期命令。</p>
<h3 id=阶段插件目标>阶段插件目标</h3>
<p>构建阶段负责构建生命周期中的特定步骤，履行这些责任步骤的方式可能会有所不同。这是由于通过声明插件目标绑定到这些构建阶段来完成的。</p>
<p>插件目标表示比构建阶段更小的任务，用于构建和管理项目</p>
<p>插件目标可以绑定0到多个构建阶段，不受任何构建阶段限制的目标可以通过直接调用在构建生命周期之外执行。执行顺序取决于调用目标和构建阶段的顺序。</p>
<p>如下面在clean和package构建阶段中指定了<code>dependency:copy-dependencies</code>插件目标</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>mvn clean dependency:copy-dependencies package
</code></pre></td></tr></table>
</div>
</div><p>该命令首先执行clean生命周期前的阶段，然后执行阶段目标dependency:copy-dependencies，最后执行default生命周期package前的阶段。</p>
<p>如果一个目标绑定到一个或多个构建阶段，那么将在所有这些阶段中调用该目标。</p>
<p>一个构建阶段可以绑定0到多个目标。如果该构建阶段没有绑定目标则不会执行该构建阶段，否则将执行所有绑定的目标</p>
<h3 id=在项目中构建生命周期>在项目中构建生命周期</h3>
<h4 id=使用packaging>使用packaging</h4>
<p>在POM中的元素<code>packaging</code>指定了一些合法值：<code>jar</code>, <code>war</code>, <code>ear</code> and <code>pom</code>，默认为jar</p>
<p>每个packaging都包含特定的阶段如下面表示jar的构建阶段和阶段目标：</p>
<table>
<thead>
<tr>
<th><code>process-resources</code></th>
<th><code>resources:resources</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>compile</code></td>
<td><code>compiler:compile</code></td>
</tr>
<tr>
<td><code>process-test-resources</code></td>
<td><code>resources:testResources</code></td>
</tr>
<tr>
<td><code>test-compile</code></td>
<td><code>compiler:testCompile</code></td>
</tr>
<tr>
<td><code>test</code></td>
<td><code>surefire:test</code></td>
</tr>
<tr>
<td><code>package</code></td>
<td><code>jar:jar</code></td>
</tr>
<tr>
<td><code>install</code></td>
<td><code>install:install</code></td>
</tr>
<tr>
<td><code>deploy</code></td>
<td><code>deploy:deploy</code></td>
</tr>
</tbody>
</table>
<p>不同的packaging可能需要不同的处理例如，纯粹为元数据的项目（包装值为pom）仅将目标绑定到安装和部署阶段</p>
<p>请注意，对于某些可用的包装类型，您可能还需要在POM的部分中包含特定的插件，并为该插件指定 true 。一个需要这个插件的例子是Plexus插件，它提供了一个丛应用程序和丛服务包装。</p>
<h4 id=配置插件>配置插件</h4>
<p>为阶段添加目标的第二种方法是在您的项目中配置插件。插件是为Maven提供目标的工件。此外，插件可能有一个或多个目标，其中每个目标代表该插件的功能。例如，Compiler插件有两个目标：compile和testcompile。前者编译主代码的源代码，后者编译测试代码的源代码</p>
<p>插件可以包含指示将目标绑定到哪个生命周期阶段的信息。请注意，单独添加插件并不足以提供信息 - 您还必须指定要作为构建的一部分运行的目标。</p>
<p>已配置的目标将被添加到已选定包装的已生效周期的目标中。如果多个目标绑定到一个阶段中，所使用的顺序是那些从packaging中被执行的。其次是在POM中配置的那些。请注意，您可以使用<executions>元素来更好地控制特定目标的顺序。如果需要的话，您可以多次使用不同的配置来运行同一个目标</p>
<p>当多个执行被给定一个特定的阶段时，它们按照POM中指定的顺序执行，首先是继承的执行。</p>
<p>一些目标可以在一个以上的阶段中使用，并且可能没有明智的默认，你可以指定一个阶段</p>
<h2 id=常见问题>常见问题</h2>
<h3 id=resource-path>resource path</h3>
<p>描述：</p>
<p>项目目录结构：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>src
 |-test
    |-java
       |-org.abc.xyz
          |-abcTest.java
    |-resources
       |-abc.a
</code></pre></td></tr></table>
</div>
</div><p>在abcTest中不能找到<code>src/test/resources/abc.a</code>中的文件</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=n>FileChannel</span> <span class=n>fc</span> <span class=o>=</span> <span class=n>FileChannel</span><span class=o>.</span><span class=na>open</span><span class=o>(</span><span class=n>Path</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;./abc.a&#34;</span><span class=o>),</span>  <span class=n>StandardOpenOption</span><span class=o>.</span><span class=na>READ</span><span class=o>);</span>
</code></pre></td></tr></table>
</div>
</div><p>原因：</p>
<p>在maven中由<code>Apache Maven Resources Plugin</code>管理main test resources</p>
<p>方法1： <code>ClassLoader</code></p>
<p>该方法可以不依赖maven路径，eclipse,idea都可用</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=n>ClassLoader</span> <span class=n>classLoader</span> <span class=o>=</span> <span class=n>getClass</span><span class=o>().</span><span class=na>getClassLoader</span><span class=o>();</span>
<span class=n>File</span> <span class=n>file</span> <span class=o>=</span> <span class=k>new</span> <span class=n>File</span><span class=o>(</span><span class=n>classLoader</span><span class=o>.</span><span class=na>getResource</span><span class=o>(</span><span class=s>&#34;somefile&#34;</span><span class=o>).</span><span class=na>getFile</span><span class=o>());</span>
<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>file</span><span class=o>.</span><span class=na>getAbsolutePath</span><span class=o>());</span>
</code></pre></td></tr></table>
</div>
</div><p>方法2：maven path</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=n>File</span> <span class=n>resourcesDirectory</span> <span class=o>=</span> <span class=k>new</span> <span class=n>File</span><span class=o>(</span><span class=s>&#34;src/test/resources&#34;</span><span class=o>);</span>
</code></pre></td></tr></table>
</div>
</div><p>参考：</p>
<ul>
<li><a test href=https://stackoverflow.com/q/28673651/8566831>How to get the path of src/test/resources directory in JUnit?</a></li>
<li><a test href=https://maven.apache.org/plugins/maven-resources-plugin/index.html>Apache Maven Resources Plugin</a></li>
</ul>
</div>
</article>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=social-links>
<a href=https://github.com/NavyD/navyd.github.io class="iconfont icon-github" title=github></a>
<a href=https://navyd.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a>
</div>
<div class=copyright>
<span class=power-by>
由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动
</span>
<span class=division>|</span>
<span class=theme-info>
主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span>
<span class=copyright-year>
&copy;
2021<span class=heart><i class="iconfont icon-heart"></i></span><span>navyd</span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class="iconfont icon-up"></i>
</div>
</div>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script>
<script>var languageCode="en".replace(/-/g,'_').replace(/_(.*)/,function(b,a){return b.replace(a,a.toUpperCase())});timeago().render(document.querySelectorAll('.timeago'),languageCode),timeago.cancel()</script>
<script type=text/javascript src=/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js></script>
</body>
</html>